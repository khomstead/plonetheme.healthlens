<?xml version="1.0" encoding="UTF-8"?>
<rules xmlns="http://namespaces.plone.org/diazo" xmlns:css="http://namespaces.plone.org/diazo/css" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">>

<object name="portal_css">
 <!-- Set conditions on stylesheets we don't want to pull in -->
 <stylesheet
    expression="not:request/HTTP_X_THEME_ENABLED | nothing"
    id="public.css"
    />
</object>
<!--	XHTML Strict-->
<xsl:output
    doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
    doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/>
     
    <theme href="index.html" css:if-content="#visual-portal-wrapper" />
    
    <notheme if-path="presentation_view"/>
    <notheme if-path="source_editor.htm"/>
    <notheme if-path="ploneimage.htm"/>
    <notheme if-path="anchor.htm"/>
    <notheme if-path="table.htm"/>
    <notheme if-path="attributes.htm"/>

    <!-- Don't theme these collage links -->
    <notheme if-path="existing-items-form"/>

    <!--  resources -->
    
    <replace theme="/html/head/title" content="/html/head/title"/>
    <drop css:theme="meta"/>
    <before content='/html/head' theme='/html/head' />
    <copy attributes="class" css:content="body" css:theme="body" />
    <copy attributes="id dir" css:content="body" css:theme="body" />
    <append css:theme=".nav-collapse" css:content="ul#portal-megamenu"/>
    <append css:theme="#page" css:content="#portal-columns"/>  
    <drop css:content=".breadcrumb"/> 
    <drop css:content="#portal-header form"/> 
    <!--Content-->
    <replace css:theme-children="#page-description" css:content-children="#parent-fieldname-description" />
    
    <drop css:theme=".post"/>
    <rules css:if-content="#collage">
        <replace css:theme-children="#page-title h1" css:content-children="#collage h1.documentFirstHeading span" />
    </rules>  
    <append css:theme="#page-title h1" css:content="h1.parent-fieldname-title" />
    <drop css:content="#parent-fieldname-title" />
    <drop css:content="#parent-fieldname-description" />
    
	</rules>

