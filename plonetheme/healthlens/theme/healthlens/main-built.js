/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*****************

   jQuery Tools overlay helpers.

   Copyright © 2010, The Plone Foundation
   Licensed under the GPL, see LICENSE.txt for details.

*****************/

/*
 * Autocomplete - jQuery plugin 1.0.2
 *
 * Copyright (c) 2007 Dylan Verheul, Dan G. Switzer, Anjesh Tuladhar, Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.autocomplete.js 5747 2008-06-25 18:30:55Z joern.zaefferer $
 *
 */

/* ===================================================
 * bootstrap-transition.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ==========================================================
 * bootstrap-alert.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-carousel.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* =============================================================
 * bootstrap-collapse.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ===========================================================
 * bootstrap-popover.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */

/* =============================================================
 * bootstrap-scrollspy.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */

/* ========================================================
 * bootstrap-tab.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */

/* =============================================================
 * bootstrap-typeahead.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ==========================================================
 * bootstrap-affix.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

//Set copyright date to current year

function getContentArea(){var e=jQuery("#region-content,#content");return e.length?e[0]:null}function wrapNode(e,t,n){jQuery(e).wrap("<"+t+">").parent().addClass(n)}function nodeContained(e,t){return jQuery(e).parents().filter(function(){return this===t}).length>0}function findContainer(e,t){var n=jQuery(e).parents().filter(t);return n.length?n.get(0):!1}function hasClassName(e,t){return jQuery(e).hasClass(t)}function addClassName(e,t){jQuery(e).addClass(t)}function removeClassName(e,t){jQuery(e).removeClass(t)}function replaceClassName(e,t,n,r){(r||jQuery(e).hasClass(t))&&jQuery(e).removeClass(t).addClass(n)}function walkTextNodes(e,t,n){jQuery(e).find("*").andSelf().contents().each(function(){this.nodeType===3&&t(this,n)})}function getInnerTextCompatible(e){return jQuery(e).text()}function getInnerTextFast(e){return jQuery(e).text()}function sortNodes(e,t,n){var r,i;r=function(e){this.value=t(e),this.cloned_node=e.cloneNode(!0)},r.prototype.toString=function(){return this.value.toString?this.value.toString():this.value},i=jQuery(e).map(function(){return new r(this)}),n?i.sort(n):i.sort(),jQuery.each(i,function(t){jQuery(e[t]).replace(this.cloned_node)})}function copyChildNodes(e,t){jQuery(e).children().clone().appendTo(jQuery(t))}function createCookie(e,t,n){var r,i;n?(r=new Date,r.setTime(r.getTime()+n*24*60*60*1e3),i="; expires="+r.toGMTString()):i="",document.cookie=e+"="+escape(t)+i+"; path=/;"}function readCookie(e){var t=e+"=",n=document.cookie.split(";"),r,i;for(r=0;r<n.length;r+=1){i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return unescape(i.substring(t.length,i.length))}return null}function toggleSelect(e,t,n,r){var i,s,o;i=t||"ids:list",s=e.isSelected,s===undefined&&(s=Boolean(n)),e.isSelected=!s,jQuery(e).attr("src",portal_url+"/select_"+(s?"all":"none")+"_icon.png"),o=r?jQuery(document.forms[r]):jQuery(document),o.find('input[name="'+i+'"]:checkbox').attr("checked",!s)}function activateCollapsibles(){(function(e){e("dl.collapsible:not([class$=Collapsible])").find("dt.collapsibleHeader:first").click(function(){var t=e(this).parents("dl.collapsible:first"),n;if(!t)return!0;n=t.hasClass("inline")?"Inline":"Block",t.toggleClass("collapsed"+n+"Collapsible").toggleClass("expanded"+n+"Collapsible")}).end().each(function(){var t=e(this).hasClass("collapsedOnLoad")?"collapsed":"expanded",n=e(this).hasClass("inline")?"Inline":"Block";e(this).removeClass("collapsedOnLoad").addClass(t+n+"Collapsible")})})(jQuery)}function setBaseFontSize(e,t){var n=jQuery("body");t&&(n.removeClass("smallText").removeClass("largeText"),createCookie("fontsize",e,365)),n.addClass(e)}function setActiveStyleSheet(e,t){jQuery("link[rel*=style][title]").attr("disabled",!0).find("[title="+e+"]").attr("disabled",!1),t&&createCookie("wstyle",e,365)}function hideAllMenus(){jQuery("dl.actionMenu").removeClass("activated").addClass("deactivated")}function toggleMenuHandler(e){return jQuery(this).parents(".actionMenu:first").toggleClass("deactivated").toggleClass("activated"),!1}function actionMenuDocumentMouseDown(e){if(jQuery(e.target).parents(".actionMenu:first").length)return!0;hideAllMenus()}function actionMenuMouseOver(e){var t=jQuery(this).parents(".actionMenu:first").attr("id"),n;if(!t)return!0;n=jQuery("dl.actionMenu.activated").length>0,jQuery("dl.actionMenu").removeClass("activated").addClass("deactivated"),n&&jQuery("#"+t).removeClass("deactivated").addClass("activated")}function initializeMenus(){jQuery(document).mousedown(actionMenuDocumentMouseDown),hideAllMenus(),jQuery("dl.actionMenu dt.actionMenuHeader a").click(toggleMenuHandler).mouseover(actionMenuMouseOver),jQuery("dl.actionMenu > dd.actionMenuContent").click(hideAllMenus)}function inputSubmitOnClick(e){if(jQuery(this).hasClass("submitting")&&!jQuery(this).hasClass("allowMultiSubmit"))return confirm(window.form_resubmit_message);jQuery(this).addClass("submitting")}function formwidget_autocomplete_ready(e,t,n){(function(n){var r=n(e.target);formwidget_autocomplete_new_value(r,t[0],t[1])})(jQuery)}function formwidget_autocomplete_new_value(e,t,n){(function(r){var i=e[0].id.replace(/-widgets-query$/,""),s=e[0].name.replace(/\.widgets\.query$/,""),o=r("#"+i+"-input-fields"),u=o.find("input:radio, input:checkbox");e.val(""),o.find("input:radio").attr("checked","");var a=o.find('input[value="'+t+'"]');if(a.length){a.each(function(){this.checked=!0});return}o,s,i;var f=u.length,l=o.data("klass"),c=o.data("title"),h=o.data("input_type"),p=r("<span/>").attr("id",i+"-"+f+"-wrapper").attr("class","option");p.append(r("<label/>").attr("for",i+"-"+f).append(r('<input type="'+h+'"'+' name="'+s+':list"'+' checked="checked" />').attr("id",i+"-"+f).attr("title",c).attr("value",t).addClass(l)).append(" ").append(r("<span>").attr("class","label").text(n))),o.append(p)})(jQuery)}function setupLinks(e){function n(e){var n=e.split("?"),r=n[0],i=[];n.length>1&&(i=n[1].split("&"));var s=t("<form/>").attr("method","POST").attr("action",r).appendTo(document.body);t.each(i,function(e,n){var r=n.split("="),i=t('<input type="hidden" name="'+r[0]+'"/>').attr("value",r[1]);i.appendTo(s)}),s.get(0).submit()}var t=jq;t(e).click(function(){return n(t(this).attr("href")),!1})}function cookiesEnabled(){var e="areYourCookiesEnabled=0";document.cookie=e;var t=document.cookie;return t.indexOf(e)==-1?0:(e="areYourCookiesEnabled=1",document.cookie=e,t=document.cookie,t.indexOf(e)==-1?0:(document.cookie="areYourCookiesEnabled=; expires=Thu, 01-Jan-70 00:00:01 GMT",1))}function setLoginVars(e,t,n,r,i,s){return i&&(el=document.getElementById(i),el&&(el.value=1)),s&&(el=document.getElementById(s),el&&(el.value=cookiesEnabled())),e&&t&&(user_name=document.getElementById(e),alt_user_name=document.getElementById(t),user_name&&alt_user_name&&(alt_user_name.value=user_name.value)),n&&r&&(password=document.getElementById(n),empty_password=document.getElementById(r),password&&empty_password&&(password.value.length==0?empty_password.value="1":empty_password.value="0")),1}function showCookieMessage(e){msg=document.getElementById(e),msg&&(cookiesEnabled()?msg.style.display="none":msg.style.display="block")}function showEnableCookiesMessage(){showCookieMessage("enable_cookies_message")}define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c});var jq=jQuery;if(typeof cssQuery=="undefined")var cssQuery=function(e,t){return jQuery.makeArray(jQuery(e,t))};define("jquery-integration",function(){}),function(e){function t(t,i){var o=this,u=t.add(o),f=e(window),l,c,h,p=e.tools.expose&&(i.mask||i.expose),d=Math.random().toString().slice(10);p&&(typeof p=="string"&&(p={color:p}),p.closeOnClick=p.closeOnEsc=!1);var v=i.target||t.attr("rel");c=v?e(v):t;if(!c.length)throw"Could not find Overlay: "+v;t&&t.index(c)==-1&&t.click(function(e){return o.load(e),e.preventDefault()}),e.extend(o,{load:function(t){if(o.isOpened())return o;var l=r[i.effect];if(!l)throw'Overlay: cannot find effect : "'+i.effect+'"';i.oneInstance&&e.each(n,function(){this.close(t)}),t=t||e.Event(),t.type="onBeforeLoad",u.trigger(t);if(t.isDefaultPrevented())return o;h=!0,p&&e(c).expose(p);var v=i.top,y=i.left,w=c.outerWidth({margin:!0}),E=c.outerHeight({margin:!0});return typeof v=="string"&&(v=v=="center"?Math.max((f.height()-E)/2,0):parseInt(v,10)/100*f.height()),y=="center"&&(y=Math.max((f.width()-w)/2,0)),l[0].call(o,{top:v,left:y},function(){h&&(t.type="onLoad",u.trigger(t))}),p&&i.closeOnClick&&e.mask.getMask().one("click",o.close),i.closeOnClick&&e(document).bind("click."+d,function(t){e(t.target).parents(c).length||o.close(t)}),i.closeOnEsc&&e(document).bind("keydown."+d,function(e){e.keyCode==27&&o.close(e)}),o},close:function(t){if(!o.isOpened())return o;t=t||e.Event(),t.type="onBeforeClose",u.trigger(t);if(!t.isDefaultPrevented())return h=!1,r[i.effect][1].call(o,function(){t.type="onClose",u.trigger(t)}),e(document).unbind("click."+d).unbind("keydown."+d),p&&e.mask.close(),o},getOverlay:function(){return c},getTrigger:function(){return t},getClosers:function(){return l},isOpened:function(){return h},getConf:function(){return i}}),e.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(t,n){e.isFunction(i[n])&&e(o).bind(n,i[n]),o[n]=function(t){return t&&e(o).bind(n,t),o}}),l=c.find(i.close||".close"),!l.length&&!i.close&&(l=e('<a class="close"></a>'),c.prepend(l)),l.click(function(e){o.close(e)}),i.load&&o.load()}e.tools=e.tools||{version:"v1.2.5"},e.tools.overlay={addEffect:function(e,t,n){r[e]=[t,n]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!e.browser.msie||e.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var n=[],r={};e.tools.overlay.addEffect("default",function(t,n){var r=this.getConf(),i=e(window);r.fixed||(t.top+=i.scrollTop(),t.left+=i.scrollLeft()),t.position=r.fixed?"fixed":"absolute",this.getOverlay().css(t).fadeIn(r.speed,n)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)}),e.fn.overlay=function(r){var i=this.data("overlay");return i?i:(e.isFunction(r)&&(r={onBeforeLoad:r}),r=e.extend(!0,{},e.tools.overlay.conf,r),this.each(function(){i=new t(e(this),r),n.push(i),e(this).data("overlay",i)}),r.api?i:this)}}(jQuery),function(e){function t(t,n){var r=e(n);return r.length<2?r:t.parent().find(n)}function n(n,i){var s=this,o=n.add(s),u=n.children(),a=0,f=i.vertical;r||(r=s),u.length>1&&(u=e(i.items,n)),e.extend(s,{getConf:function(){return i},getIndex:function(){return a},getSize:function(){return s.getItems().size()},getNaviButtons:function(){return h.add(d)},getRoot:function(){return n},getItemWrap:function(){return u},getItems:function(){return u.children(i.item).not("."+i.clonedClass)},move:function(e,t){return s.seekTo(a+e,t)},next:function(e){return s.move(1,e)},prev:function(e){return s.move(-1,e)},begin:function(e){return s.seekTo(0,e)},end:function(e){return s.seekTo(s.getSize()-1,e)},focus:function(){return r=s},addItem:function(t){return t=e(t),i.circular?(u.children("."+i.clonedClass+":last").before(t),u.children("."+i.clonedClass+":first").replaceWith(t.clone().addClass(i.clonedClass))):u.append(t),o.trigger("onAddItem",[t]),s},seekTo:function(t,n,l){t.jquery||(t*=1);if(i.circular&&t===0&&a==-1&&n!==0)return s;if(!i.circular&&t<0||t>s.getSize()||t<-1)return s;var c=t;t.jquery?t=s.getItems().index(t):c=s.getItems().eq(t);var h=e.Event("onBeforeSeek");if(!l){o.trigger(h,[t,n]);if(h.isDefaultPrevented()||!c.length)return s}return c=f?{top:-c.position().top}:{left:-c.position().left},a=t,r=s,n===undefined&&(n=i.speed),u.animate(c,n,i.easing,l||function(){o.trigger("onSeek",[t])}),s}}),e.each(["onBeforeSeek","onSeek","onAddItem"],function(t,n){e.isFunction(i[n])&&e(s).bind(n,i[n]),s[n]=function(t){return t&&e(s).bind(n,t),s}});if(i.circular){var l=s.getItems().slice(-1).clone().prependTo(u),c=s.getItems().eq(1).clone().appendTo(u);l.add(c).addClass(i.clonedClass),s.onBeforeSeek(function(e,t,n){if(!e.isDefaultPrevented()){if(t==-1)return s.seekTo(l,n,function(){s.end(0)}),e.preventDefault();t==s.getSize()&&s.seekTo(c,n,function(){s.begin(0)})}}),s.seekTo(0,0,function(){})}var h=t(n,i.prev).click(function(){s.prev()}),d=t(n,i.next).click(function(){s.next()});!i.circular&&s.getSize()>1&&(s.onBeforeSeek(function(e,t){setTimeout(function(){e.isDefaultPrevented()||(h.toggleClass(i.disabledClass,t<=0),d.toggleClass(i.disabledClass,t>=s.getSize()-1))},1)}),i.initialIndex||h.addClass(i.disabledClass)),i.mousewheel&&e.fn.mousewheel&&n.mousewheel(function(e,t){if(i.mousewheel)return s.move(t<0?1:-1,i.wheelSpeed||50),!1});if(i.touch){var v={};u[0].ontouchstart=function(e){e=e.touches[0],v.x=e.clientX,v.y=e.clientY},u[0].ontouchmove=function(e){if(e.touches.length==1&&!u.is(":animated")){var t=e.touches[0],n=v.x-t.clientX;t=v.y-t.clientY,s[f&&t>0||!f&&n>0?"next":"prev"](),e.preventDefault()}}}i.keyboard&&e(document).bind("keydown.scrollable",function(t){if(!(!i.keyboard||t.altKey||t.ctrlKey||e(t.target).is(":input")))if(i.keyboard=="static"||r==s){var n=t.keyCode;if(!(!f||n!=38&&n!=40))return s.move(n==38?-1:1),t.preventDefault();if(!f&&(n==37||n==39))return s.move(n==37?-1:1),t.preventDefault()}}),i.initialIndex&&s.seekTo(i.initialIndex,0,function(){})}e.tools=e.tools||{version:"v1.2.5"},e.tools.scrollable={conf:{activeClass:"active",circular:!1,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:!0,mousewheel:!1,next:".next",prev:".prev",speed:400,vertical:!1,touch:!0,wheelSpeed:0}};var r;e.fn.scrollable=function(t){var r=this.data("scrollable");return r?r:(t=e.extend({},e.tools.scrollable.conf,t),this.each(function(){r=new n(e(this),t),e(this).data("scrollable",r)}),t.api?r:this)}}(jQuery),function(e){function t(t,r,i){var s=this,u=t.add(this),a=t.find(i.tabs),f=r.jquery?r:t.children(r),l;a.length||(a=t.children()),f.length||(f=t.parent().find(r)),f.length||(f=e(r)),e.extend(this,{click:function(t,r){var f=a.eq(t);typeof t=="string"&&t.replace("#","")&&(f=a.filter("[href*="+t.replace("#","")+"]"),t=Math.max(a.index(f),0));if(i.rotate){var p=a.length-1;if(t<0)return s.click(p,r);if(t>p)return s.click(0,r)}if(!f.length){if(l>=0)return s;t=i.initialIndex,f=a.eq(t)}if(t===l)return s;r=r||e.Event(),r.type="onBeforeClick",u.trigger(r,[t]);if(!r.isDefaultPrevented())return n[i.effect].call(s,t,function(){r.type="onClick",u.trigger(r,[t])}),l=t,a.removeClass(i.current),f.addClass(i.current),s},getConf:function(){return i},getTabs:function(){return a},getPanes:function(){return f},getCurrentPane:function(){return f.eq(l)},getCurrentTab:function(){return a.eq(l)},getIndex:function(){return l},next:function(){return s.click(l+1)},prev:function(){return s.click(l-1)},destroy:function(){return a.unbind(i.event).removeClass(i.current),f.find("a[href^=#]").unbind("click.T"),s}}),e.each("onBeforeClick,onClick".split(","),function(t,n){e.isFunction(i[n])&&e(s).bind(n,i[n]),s[n]=function(t){return t&&e(s).bind(n,t),s}}),i.history&&e.fn.history&&(e.tools.history.init(a),i.event="history"),a.each(function(t){e(this).bind(i.event,function(e){return s.click(t,e),e.preventDefault()})}),f.find("a[href^=#]").bind("click.T",function(t){s.click(e(this).attr("href"),t)}),location.hash&&i.tabs=="a"&&t.find("[href="+location.hash+"]").length?s.click(location.hash):(i.initialIndex===0||i.initialIndex>0)&&s.click(i.initialIndex)}e.tools=e.tools||{version:"v1.2.5"},e.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,history:!1},addEffect:function(e,t){n[e]=t}};var n={"default":function(e,t){this.getPanes().hide().eq(e).show(),t.call()},fade:function(e,t){var n=this.getConf(),r=n.fadeOutSpeed,i=this.getPanes();r?i.fadeOut(r):i.hide(),i.eq(e).fadeIn(n.fadeInSpeed,t)},slide:function(e,t){this.getPanes().slideUp(200),this.getPanes().eq(e).slideDown(400,t)},ajax:function(e,t){this.getPanes().eq(0).load(this.getTabs().eq(e).attr("href"),t)}},r;e.tools.tabs.addEffect("horizontal",function(t,n){r||(r=this.getPanes().eq(0).width()),this.getCurrentPane().animate({width:0},function(){e(this).hide()}),this.getPanes().eq(t).animate({width:r},function(){e(this).show(),n.call()})}),e.fn.tabs=function(n,r){var i=this.data("tabs");return i&&(i.destroy(),this.removeData("tabs")),e.isFunction(r)&&(r={onBeforeClick:r}),r=e.extend({},e.tools.tabs.conf,r),this.each(function(){i=new t(e(this),n,r),e(this).data("tabs",i)}),r.api?i:this}}(jQuery),function(e){function t(){if(e.browser.msie){var t=e(document).height(),n=e(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t-n<20?n:t]}return[e(document).width(),e(document).height()]}function n(t){if(t)return t.call(e.mask)}e.tools=e.tools||{version:"v1.2.5"};var r;r=e.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var i,s,o,u,a;e.mask={load:function(f,p){if(o)return this;typeof f=="string"&&(f={color:f}),f=f||u,u=f=e.extend(e.extend({},r.conf),f),i=e("#"+f.maskId),i.length||(i=e("<div/>").attr("id",f.maskId),e("body").append(i));var d=t();return i.css({position:"absolute",top:0,left:0,width:d[0],height:d[1],display:"none",opacity:f.startOpacity,zIndex:f.zIndex}),f.color&&i.css("backgroundColor",f.color),n(f.onBeforeLoad)===!1?this:(f.closeOnEsc&&e(document).bind("keydown.mask",function(t){t.keyCode==27&&e.mask.close(t)}),f.closeOnClick&&i.bind("click.mask",function(t){e.mask.close(t)}),e(window).bind("resize.mask",function(){e.mask.fit()}),p&&p.length&&(a=p.eq(0).css("zIndex"),e.each(p,function(){var t=e(this);/relative|absolute|fixed/i.test(t.css("position"))||t.css("position","relative")}),s=p.css({zIndex:Math.max(f.zIndex+1,a=="auto"?0:a)})),i.css({display:"block"}).fadeTo(f.loadSpeed,f.opacity,function(){e.mask.fit(),n(f.onLoad),o="full"}),o=!0,this)},close:function(){if(o){if(n(u.onBeforeClose)===!1)return this;i.fadeOut(u.closeSpeed,function(){n(u.onClose),s&&s.css({zIndex:a}),o=!1}),e(document).unbind("keydown.mask"),i.unbind("click.mask"),e(window).unbind("resize.mask")}return this},fit:function(){if(o){var e=t();i.css({width:e[0],height:e[1]})}},getMask:function(){return i},isLoaded:function(e){return e?o=="full":o},getConf:function(){return u},getExposed:function(){return s}},e.fn.mask=function(t){return e.mask.load(t),this},e.fn.expose=function(t){return e.mask.load(t,this),this}}(jQuery),function(e){function t(e){if(e){var t=r.contentWindow.document;t.open().close(),t.location.hash=e}}var n,r,i,s;e.tools=e.tools||{version:"v1.2.5"},e.tools.history={init:function(o){s||(e.browser.msie&&e.browser.version<"8"?r||(r=e("<iframe/>").attr("src","javascript:false;").hide().get(0),e("body").append(r),setInterval(function(){var t=r.contentWindow.document;t=t.location.hash,n!==t&&e.event.trigger("hash",t)},100),t(location.hash||"#")):setInterval(function(){var t=location.hash;t!==n&&e.event.trigger("hash",t)},100),i=i?i.add(o):o,o.click(function(n){var i=e(this).attr("href");r&&t(i);if(i.slice(0,1)!="#")return location.href="#"+i,n.preventDefault()}),s=!0)}},e(window).bind("hash",function(t,r){r?i.filter(function(){var t=e(this).attr("href");return t==r||t==r.replace("#","")}).trigger("history",[r]):i.eq(0).trigger("history",[r]),n=r}),e.fn.history=function(t){return e.tools.history.init(this),this.bind("history",t)}}(jQuery),function(e){function t(t,n,r){var i=r.relative?t.position().top:t.offset().top,s=r.relative?t.position().left:t.offset().left,o=r.position[0];i-=n.outerHeight()-r.offset[0],s+=t.outerWidth()+r.offset[1],/iPad/i.test(navigator.userAgent)&&(i-=e(window).scrollTop());var u=n.outerHeight()+t.outerHeight();return o=="center"&&(i+=u/2),o=="bottom"&&(i+=u),o=r.position[1],t=n.outerWidth()+t.outerWidth(),o=="center"&&(s-=t/2),o=="left"&&(s-=t),{top:i,left:s}}function n(n,i){var s=this,u=n.add(s),a,l=0,c=0,h=n.attr("title"),d=n.attr("data-tooltip"),v=r[i.effect],m,g=n.is(":input"),y=g&&n.is(":checkbox, :radio, select, :button, :submit"),b=n.attr("type"),w=i.events[b]||i.events[g?y?"widget":"input":"def"];if(!v)throw'Nonexistent effect "'+i.effect+'"';w=w.split(/,\s*/);if(w.length!=2)throw"Tooltip: bad events configuration for "+b;n.bind(w[0],function(e){clearTimeout(l),i.predelay?c=setTimeout(function(){s.show(e)},i.predelay):s.show(e)}).bind(w[1],function(e){clearTimeout(c),i.delay?l=setTimeout(function(){s.hide(e)},i.delay):s.hide(e)}),h&&i.cancelDefault&&(n.removeAttr("title"),n.data("title",h)),e.extend(s,{show:function(r){if(!a){d?a=e(d):i.tip?a=e(i.tip).eq(0):h?a=e(i.layout).addClass(i.tipClass).appendTo(document.body).hide().append(h):(a=n.next(),a.length||(a=n.parent().next()));if(!a.length)throw"Cannot find tooltip for "+n}if(s.isShown())return s;a.stop(!0,!0);var o=t(n,a,i);return i.tip&&a.html(n.data("title")),r=r||e.Event(),r.type="onBeforeShow",u.trigger(r,[o]),r.isDefaultPrevented()?s:(o=t(n,a,i),a.css({position:"absolute",top:o.top,left:o.left}),m=!0,v[0].call(s,function(){r.type="onShow",m="full",u.trigger(r)}),o=i.events.tooltip.split(/,\s*/),a.data("__set")||(a.bind(o[0],function(){clearTimeout(l),clearTimeout(c)}),o[1]&&!n.is("input:not(:checkbox, :radio), textarea")&&a.bind(o[1],function(e){e.relatedTarget!=n[0]&&n.trigger(w[1].split(" ")[0])}),a.data("__set",!0)),s)},hide:function(t){if(!a||!s.isShown())return s;t=t||e.Event(),t.type="onBeforeHide",u.trigger(t);if(!t.isDefaultPrevented())return m=!1,r[i.effect][1].call(s,function(){t.type="onHide",u.trigger(t)}),s},isShown:function(e){return e?m=="full":m},getConf:function(){return i},getTip:function(){return a},getTrigger:function(){return n}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,n){e.isFunction(i[n])&&e(s).bind(n,i[n]),s[n]=function(t){return t&&e(s).bind(n,t),s}})}e.tools=e.tools||{version:"v1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,n){r[e]=[t,n]}};var r={toggle:[function(e){var t=this.getConf(),n=this.getTip();t=t.opacity,t<1&&n.css({opacity:t}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var r=this.data("tooltip");return r?r:(t=e.extend(!0,{},e.tools.tooltip.conf,t),typeof t.position=="string"&&(t.position=t.position.split(/,?\s/)),this.each(function(){r=new n(e(this),t),e(this).data("tooltip",r)}),t.api?r:this)}}(jQuery),define("jquerytools",function(){}),function(e){function t(e,t){return 32-(new Date(e,t,32)).getDate()}function n(e,t){e=""+e;for(t=t||2;e.length<t;)e="0"+e;return e}function r(e,t,r){var i=e.getDate(),s=e.getDay(),o=e.getMonth();e=e.getFullYear();var u={d:i,dd:n(i),ddd:c[r].shortDays[s],dddd:c[r].days[s],m:o+1,mm:n(o+1),mmm:c[r].shortMonths[o],mmmm:c[r].months[o],yy:String(e).slice(2),yyyy:e};return t=t.replace(h,function(e){return e in u?u[e]:e.slice(1,e.length-1)}),p.html(t).html()}function i(e){return parseInt(e,10)}function s(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function o(e){if(e){if(e.constructor==Date)return e;if(typeof e=="string"){var t=e.split("-");if(t.length==3)return new Date(i(t[0]),i(t[1])-1,i(t[2]));if(!/^-?\d+$/.test(e))return;e=i(e)}return t=new Date,t.setDate(t.getDate()+e),t}}function u(n,u){function f(t,i,s){A=t,N=t.getFullYear(),k=t.getMonth(),L=t.getDate(),s=s||e.Event("api"),s.type="change",P.trigger(s,[t]),s.isDefaultPrevented()||(n.val(r(t,i.format,i.lang)),n.data("date",t),p.hide(s))}function h(t){t.type="onShow",P.trigger(t),e(document).bind("keydown.d",function(t){if(t.ctrlKey)return!0;var r=t.keyCode;if(r==8)return n.val(""),p.hide(t);if(r==27)return p.hide(t);if(e(l).index(r)>=0){if(!_)return p.show(t),t.preventDefault();var i=e("#"+g.weeks+" a"),s=e("."+g.focus),o=i.index(s);s.removeClass(g.focus);if(r==74||r==40)o+=7;else if(r==75||r==38)o-=7;else if(r==76||r==39)o+=1;else if(r==72||r==37)o-=1;return o>41?(p.addMonth(),s=e("#"+g.weeks+" a:eq("+(o-42)+")")):o<0?(p.addMonth(-1),s=e("#"+g.weeks+" a:eq("+(o+42)+")")):s=i.eq(o),s.addClass(g.focus),t.preventDefault()}return r==34?p.addMonth():r==33?p.addMonth(-1):r==36?p.today():(r==13&&(e(t.target).is("select")||e("."+g.focus).click()),e([16,17,18,9]).index(r)>=0)}),e(document).bind("click.d",function(t){var r=t.target;!e(r).parents("#"+g.root).length&&r!=n[0]&&(!E||r!=E[0])&&p.hide(t)})}var p=this,m=new Date,g=u.css,y=c[u.lang],b=e("#"+g.root),w=b.find("#"+g.title),E,S,x,N,k,L,A=n.attr("data-value")||u.value||n.val(),O=n.attr("min")||u.min,M=n.attr("max")||u.max,_;O===0&&(O="0"),A=o(A)||m,O=o(O||u.yearRange[0]*365),M=o(M||u.yearRange[1]*365);if(!y)throw"Dateinput: invalid language: "+u.lang;if(n.attr("type")=="date"){var D=e("<input/>");e.each("class,disabled,id,maxlength,name,readonly,required,size,style,tabindex,title,value".split(","),function(e,t){D.attr(t,n.attr(t))}),n.replaceWith(D),n=D}n.addClass(g.input);var P=n.add(p);if(!b.length){b=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",g.root),b.children().eq(0).attr("id",g.head).end().eq(1).attr("id",g.body).children().eq(0).attr("id",g.days).end().eq(1).attr("id",g.weeks).end().end().end().find("a").eq(0).attr("id",g.prev).end().eq(1).attr("id",g.next),w=b.find("#"+g.head).find("div").attr("id",g.title);if(u.selectors){var H=e("<select/>").attr("id",g.month),j=e("<select/>").attr("id",g.year);w.html(H.add(j))}for(var F=b.find("#"+g.days),I=0;I<7;I++)F.append(e("<span/>").text(y.shortDays[(I+u.firstDay)%7]));e("body").append(b)}u.trigger&&(E=e("<a/>").attr("href","#").addClass(g.trigger).click(function(e){return p.show(),e.preventDefault()}).insertAfter(n));var q=b.find("#"+g.weeks);j=b.find("#"+g.year),H=b.find("#"+g.month),e.extend(p,{show:function(t){if(!(n.attr("readonly")||n.attr("disabled")||_)){t=t||e.Event(),t.type="onBeforeShow",P.trigger(t);if(!t.isDefaultPrevented()){e.each(a,function(){this.hide()}),_=!0,H.unbind("change").change(function(){p.setValue(j.val(),e(this).val())}),j.unbind("change").change(function(){p.setValue(e(this).val(),H.val())}),S=b.find("#"+g.prev).unbind("click").click(function(){return S.hasClass(g.disabled)||p.addMonth(-1),!1}),x=b.find("#"+g.next).unbind("click").click(function(){return x.hasClass(g.disabled)||p.addMonth(),!1}),p.setValue(A);var r=n.offset();return/iPad/i.test(navigator.userAgent)&&(r.top-=e(window).scrollTop()),b.css({top:r.top+n.outerHeight({margins:!0})+u.offset[0],left:r.left+u.offset[1]}),u.speed?b.show(u.speed,function(){h(t)}):(b.show(),h(t)),p}}},setValue:function(n,r,o){var a=i(r)>=-1?new Date(i(n),i(r),i(o||1)):n||A;a<O?a=O:a>M&&(a=M),n=a.getFullYear(),r=a.getMonth(),o=a.getDate(),r==-1?(r=11,n--):r==12&&(r=0,n++);if(!_)return f(a,u),p;k=r,N=n,o=new Date(n,r,1-u.firstDay),o=o.getDay();var l=t(n,r),c=t(n,r-1),h;if(u.selectors){H.empty(),e.each(y.months,function(t,r){O<new Date(n,t+1,-1)&&M>new Date(n,t,0)&&H.append(e("<option/>").html(r).attr("value",t))}),j.empty(),a=m.getFullYear();for(var b=a+u.yearRange[0];b<a+u.yearRange[1];b++)O<=new Date(b+1,-1,1)&&M>new Date(b,0,0)&&j.append(e("<option/>").text(b));H.val(r),j.val(n)}else w.html(y.months[r]+" "+n);q.empty(),S.add(x).removeClass(g.disabled),b=o?0:-7;for(var E,T;b<(o?42:35);b++)E=e("<a/>"),b%7===0&&(h=e("<div/>").addClass(g.week),q.append(h)),b<o?(E.addClass(g.off),T=c-o+b+1,a=new Date(n,r-1,T)):b>=o+l?(E.addClass(g.off),T=b-l-o+1,a=new Date(n,r+1,T)):(T=b-o+1,a=new Date(n,r,T),s(A,a)?E.attr("id",g.current).addClass(g.focus):s(m,a)&&E.attr("id",g.today)),O&&a<O&&E.add(S).addClass(g.disabled),M&&a>M&&E.add(x).addClass(g.disabled),E.attr("href","#"+T).text(T).data("date",a),h.append(E);return q.find("a").click(function(t){var n=e(this);return n.hasClass(g.disabled)||(e("#"+g.current).removeAttr("id"),n.attr("id",g.current),f(n.data("date"),u,t)),!1}),g.sunday&&q.find(g.week).each(function(){var t=u.firstDay?7-u.firstDay:0;e(this).children().slice(t,t+1).addClass(g.sunday)}),p},setMin:function(e,t){return O=o(e),t&&A<O&&p.setValue(O),p},setMax:function(e,t){return M=o(e),t&&A>M&&p.setValue(M),p},today:function(){return p.setValue(m)},addDay:function(e){return this.setValue(N,k,L+(e||1))},addMonth:function(e){return this.setValue(N,k+(e||1),L)},addYear:function(e){return this.setValue(N+(e||1),k,L)},hide:function(t){if(_){t=e.Event(),t.type="onHide",P.trigger(t),e(document).unbind("click.d").unbind("keydown.d");if(t.isDefaultPrevented())return;b.hide(),_=!1}return p},getConf:function(){return u},getInput:function(){return n},getCalendar:function(){return b},getValue:function(e){return e?r(A,e,u.lang):A},isOpen:function(){return _}}),e.each(["onBeforeShow","onShow","change","onHide"],function(t,n){e.isFunction(u[n])&&e(p).bind(n,u[n]),p[n]=function(t){return t&&e(p).bind(n,t),p}}),n.bind("focus click",p.show).keydown(function(t){var n=t.keyCode;return!_&&e(l).index(n)>=0?(p.show(t),t.preventDefault()):t.shiftKey||t.ctrlKey||t.altKey||n==9?!0:t.preventDefault()}),o(n.val())&&f(A,u)}e.tools=e.tools||{version:"v1.2.5"};var a=[],f,l=[75,76,38,39,74,72,40,37],c={};f=e.tools.dateinput={conf:{format:"mm/dd/yy",selectors:!1,yearRange:[-5,5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:undefined,max:undefined,trigger:!1,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},localize:function(t,n){e.each(n,function(e,t){n[e]=t.split(",")}),c[t]=n}},f.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var h=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,p=e("<a/>");e.expr[":"].date=function(t){var n=t.getAttribute("type");return n&&n=="date"||!!e(t).data("dateinput")},e.fn.dateinput=function(t){if(this.data("dateinput"))return this;t=e.extend(!0,{},f.conf,t),e.each(t.css,function(e,n){!n&&e!="prefix"&&(t.css[e]=(t.css.prefix||"")+(n||e))});var n;return this.each(function(){var r=new u(e(this),t);a.push(r),r=r.getInput().data("dateinput",r),n=n?n.add(r):r}),n?n:this}}(jQuery),define("jquerytools-dateinput",function(){});var pb={spinner:{},overlay_counter:1};jQuery.tools.overlay.conf.oneInstance=!1,jQuery(function(t){pb.spinner.show=function(){t("body").css("cursor","wait")},pb.spinner.hide=function(){t("body").css("cursor","")},t.fn.prepOverlay=function(e){return this.each(function(){var n,r,i,s,o,u,a;n=t(this),r=t.extend(!0,{},e),i=r.config||{},s=pb[r.subtype],s&&(i.onBeforeLoad=s),o=i.onLoad,i.onLoad=function(){o&&o.apply(this,arguments),pb.fi_focus(this.getOverlay())},u=n.attr("href")||n.attr("src")||n.attr("action"),r.urlmatch&&(u=u.replace(new RegExp(r.urlmatch),r.urlreplace));if(r.subtype==="inline")u=u.replace(/^.+#/,"#"),t("[id='"+u.replace("#","")+"']").addClass("overlay"),n.removeAttr("href").attr("rel",u),n.overlay();else{r.nt="pb_"+pb.overlay_counter,pb.overlay_counter+=1,r.selector=r.filter||r.selector,r.selector||(a=u.split(" "),u=a.shift(),r.selector=a.join(" ")),r.src=u,r.config=i,r.source=n,pb.remove_overlay(n),n.data("pbo",r),n.attr("rel","#"+r.nt),n.addClass("link-overlay");switch(r.subtype){case"image":n.click(pb.image_click);break;case"ajax":n.click(pb.ajax_click);break;case"iframe":pb.create_content_div(r),n.overlay(i);break;default:throw"Unsupported overlay type"}n.css("cursor","pointer")}})},pb.remove_overlay=function(e){var n=e.data("pbo");if(n){switch(n.subtype){case"image":e.unbind("click",pb.image_click);break;case"ajax":e.unbind("click",pb.ajax_click);break;default:e.unbind("click")}n.nt&&t("#"+n.nt).remove()}},pb.create_content_div=function(e){var n,r;return typeof close_box_message=="undefined"?r="Close this box.":r=close_box_message,n=t('<div id="'+e.nt+'" class="overlay overlay-'+e.subtype+" "+(e.cssclass||"")+'"><div class="close"><span><a href="#">'+r+"</a></span></div></div>"),n.data("pbo",e),e.width&&n.width(e.width),n.appendTo(t("body")),n},pb.image_click=function(e){var n,r,i,s,o,u;return n=t(this),u=n.data("pbo"),r=t(n.attr("rel")),r.length||(r=pb.create_content_div(u),r.overlay(u.config)),i=r.overlay(),r.find("img").length===0?u.src&&(pb.spinner.show(),s=new Image,s.src=u.src,o=t(s),r.append(o.addClass("pb-image")),o.load(function(){pb.spinner.hide(),i.load()})):i.load(),!1},pb.fi_focus=function(e){e.find("form div.error :input:first").focus().length||e.find("form :input:visible:first").focus()},pb.ajax_error_recover=function(e,n){var r=t("<div/>").append(e.replace(/<script(.|\s)*?\/script>/gi,""));return n?r.find(n):r},pb.add_ajax_load=function(e){e.find("input[name=ajax_load]").length===0&&e.prepend(t('<input type="hidden" name="ajax_load" value="'+(new Date).getTime()+'" />'))},pb.prep_ajax_form=function(e){var n=e.closest(".pb-ajax"),r=n.closest(".overlay-ajax"),i=r.data("pbo"),s=i.formselector,o=i.closeselector,u=i.beforepost,a=i.afterpost,f=i.noform,l=r.overlay(),c=i.selector,h={};h.beforeSerialize=function(){pb.spinner.show()},u&&(h.beforeSubmit=function(e,t,n){return u(t,e,n)}),h.success=function(e,u,p,d){t(document).trigger("formOverlayStart",[this,e,u,p,d]);var v,m,g,y;g=u==="success"||u==="notmodified",g||(e=e.responseText),e=e.replace(/<script(.|\s)*?\/script>/gi,""),v=t("<div />").append(c?t("<div />").append(e).find(c):e),g&&a&&a(v,r),m=v.find(s);if(g&&m.length)n.empty().append(v),pb.fi_focus(n),pb.add_ajax_load(m),m.ajaxForm(h),o&&v.find(o).click(function(e){return l.close(),!1}),t(document).trigger("formOverlayLoadSuccess",[this,m,l,pb,n]);else{g?typeof f=="function"&&(f=f(this)):f=u;switch(f){case"close":l.close();break;case"reload":l.close(),pb.spinner.show(),location.replace(location.href);break;case"redirect":l.close(),pb.spinner.show(),y=i.redirect,typeof y=="function"&&(y=y(this,e)),location.replace(y);break;default:v.children()?n.empty().append(v):l.close()}t(document).trigger("formOverlayLoadFailure",[this,m,l,pb,n,f])}pb.spinner.hide()},h.error=h.success,pb.add_ajax_load(e),e.ajaxForm(h)},pb.ajax_click=function(n){var r=t(this),i,s,o,u,a,f,l,c,h;e=t.Event(),e.type="beforeAjaxClickHandled",t(document).trigger(e,[this,n]);if(e.isDefaultPrevented())return;return i=r.data("pbo"),s=pb.create_content_div(i),s.overlay(i.config),o=s.overlay(),u=i.src,f=i.selector,l=i.formselector,c=i.closeselector,pb.spinner.show(),t(this).find("input.submitting").removeClass("submitting"),a=t('<div class="pb-ajax" />'),o.getConf().fixed&&a.css("max-height",Math.floor(t(window).height()*.75)),s.append(a),h=u.indexOf("?")>=0?"&":"?",u+=h+"ajax_load="+(new Date).getTime(),f&&(u+=" "+f),a[0].handle_load_inside_overlay=function(e,n){var r=t(this);n==="error"?r.append(pb.ajax_error_recover(e,f)):e.length||r.append(ajax_noresponse_message||"No response from server."),r.wrapInner("<div />");if(l){var i=r.find(l);i.length>0&&pb.prep_ajax_form(i)}c&&r.find(c).click(function(e){return o.close(),!1}),t.fn.ploneTabInit&&r.ploneTabInit(),o.onClose=function(){s.remove()},t(document).trigger("loadInsideOverlay",[this,e,n,o])},a.load(u,null,function(e,t){return a[0].handle_load_inside_overlay.apply(this,[e,t]),pb.spinner.hide(),o.load(),!0}),!1},pb.iframe=function(){var e,t;return pb.spinner.show(),e=this.getOverlay(),t=this.getTrigger().data("pbo"),e.find("iframe").length===0&&t.src?e.append('<iframe src="'+t.src+'" width="'+e.width()+'" height="'+e.height()+'" onload="pb.spinner.hide()"/>'):pb.spinner.hide(),!0}}),define("jquerytools-overlayhelpers",function(){}),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(n){function r(){function r(){var t=f.attr("target"),n=f.attr("action");o.setAttribute("target",a),o.getAttribute("method")!="POST"&&o.setAttribute("method","POST"),o.getAttribute("action")!=u.url&&o.setAttribute("action",u.url),u.skipEncodingOverride||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&setTimeout(function(){g=!0,i()},u.timeout);var r=[];try{if(u.extraData)for(var s in u.extraData)r.push(e('<input type="hidden" name="'+s+'" value="'+u.extraData[s]+'" />').appendTo(o)[0]);c.appendTo("body"),c.data("form-plugin-onload",i),o.submit()}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):f.removeAttr("target"),e(r).remove()}}function i(){if(!m){c.removeData("form-plugin-onload");var n=!0;try{if(g)throw"timeout";S=h.contentWindow?h.contentWindow.document:h.contentDocument?h.contentDocument:h.document;var r=u.dataType=="xml"||S.XMLDocument||e.isXMLDoc(S);t("isXml="+r);if(!r&&window.opera&&(S.body==null||S.body.innerHTML=="")&&--x){t("requeing onLoad callback, DOM not available"),setTimeout(i,250);return}m=!0,d.responseText=S.documentElement?S.documentElement.innerHTML:null,d.responseXML=S.XMLDocument?S.XMLDocument:S,d.getResponseHeader=function(e){var t={"content-type":u.dataType};return t[e]};var o=/(json|script)/.test(u.dataType);if(o||u.textarea){var a=S.getElementsByTagName("textarea")[0];if(a)d.responseText=a.value;else if(o){var f=S.getElementsByTagName("pre")[0],l=S.getElementsByTagName("body")[0];f?d.responseText=f.textContent:l&&(d.responseText=l.innerHTML)}}else u.dataType=="xml"&&!d.responseXML&&d.responseText!=null&&(d.responseXML=s(d.responseText));E=e.httpData(d,u.dataType)}catch(y){t("error caught:",y),n=!1,d.error=y,e.handleError(u,d,"error",y)}d.aborted&&(t("upload aborted"),n=!1),n&&(u.success.call(u.context,E,"success",d),v&&e.event.trigger("ajaxSuccess",[d,u])),v&&e.event.trigger("ajaxComplete",[d,u]),v&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,d,n?"success":"error"),setTimeout(function(){c.removeData("form-plugin-onload"),c.remove(),d.responseXML=null},100)}}function s(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null}var o=f[0];if(e(":input[name=submit],:input[id=submit]",o).length)alert('Error: Form elements must not have name or id of "submit".');else{var u=e.extend(!0,{},e.ajaxSettings,n);u.context=u.context||u;var a="jqFormIO"+(new Date).getTime(),l="_"+a;window[l]=function(){var e=c.data("form-plugin-onload");if(e){e(),window[l]=undefined;try{delete window[l]}catch(t){}}};var c=e('<iframe id="'+a+'" name="'+a+'" src="'+u.iframeSrc+'" onload="window[\'_\'+this.id]()" />'),h=c[0];c.css({position:"absolute",top:"-1000px",left:"-1000px"});var d={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,c.attr("src",u.iframeSrc)}},v=u.global;v&&!(e.active++)&&e.event.trigger("ajaxStart"),v&&e.event.trigger("ajaxSend",[d,u]);if(u.beforeSend&&u.beforeSend.call(u.context,d,u)===!1)u.global&&e.active--;else if(!d.aborted){var m=!1,g=0,y=o.clk;if(y){var w=y.name;w&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[w]=y.value,y.type=="image"&&(u.extraData[w+".x"]=o.clk_x,u.extraData[w+".y"]=o.clk_y))}u.forceSync?r():setTimeout(r,10);var E,S,x=50}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;typeof n=="function"&&(n={success:n});var i=this.attr("action");if(i=typeof i=="string"?e.trim(i):"")i=(i.match(/^([^#]+)/)||[])[1];i=i||window.location.href||"",n=e.extend(!0,{url:i,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n),i={},this.trigger("form-pre-serialize",[this,n,i]);if(i.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var s,o,u=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(s in n.data)if(n.data[s]instanceof Array)for(var a in n.data[s])u.push({name:s,value:n.data[s][a]});else o=n.data[s],o=e.isFunction(o)?o():o,u.push({name:s,value:o})}if(n.beforeSubmit&&n.beforeSubmit(u,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[u,this,n,i]);if(i.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;s=e.param(u),n.type.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+s,n.data=null):n.data=s;var f=this,l=[];n.resetForm&&l.push(function(){f.resetForm()}),n.clearForm&&l.push(function(){f.clearForm()});if(!n.dataType&&n.target){var c=n.success||function(){};l.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(c,arguments)})}else n.success&&l.push(n.success);return n.success=function(e,t,r){for(var i=n.context||n,s=0,o=l.length;s<o;s++)l[s].apply(i,[e,t,r||f,f])},s=e("input:file",this).length>0,a="multipart/form-data",a=f.attr("enctype")==a||f.attr("encoding")==a,n.iframe!==!1&&(s||n.iframe||a)?n.closeKeepAlive?e.get(n.closeKeepAlive,r):r():e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(this.length===0){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,r=e(n);if(!r.is(":submit,input:image")){n=r.closest(":submit");if(n.length==0)return;n=n[0]}var i=this;i.clk=n,n.type=="image"&&(t.offsetX!=undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof e.fn.offset=="function"?(r=r.offset(),i.clk_x=t.pageX-r.left,i.clk_y=t.pageY-r.top):(i.clk_x=t.pageX-n.offsetLeft,i.clk_y=t.pageY-n.offsetTop)),setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(this.length===0)return n;var r=this[0],i=t?r.getElementsByTagName("*"):r.elements;if(!i)return n;var s,o,u,a,f,l;s=0;for(f=i.length;s<f;s++){o=i[s];if(u=o.name)if(t&&r.clk&&o.type=="image")!o.disabled&&r.clk==o&&(n.push({name:u,value:e(o).val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}));else if((a=e.fieldValue(o,!0))&&a.constructor==Array){o=0;for(l=a.length;o<l;o++)n.push({name:u,value:a[o]})}else a!==null&&typeof a!="undefined"&&n.push({name:u,value:a})}return!t&&r.clk&&(t=e(r.clk),i=t[0],(u=i.name)&&!i.disabled&&i.type=="image"&&(n.push({name:u,value:t.val()}),n.push({name:u+".x",value:r.clk_x},{name:u+".y",value:r.clk_y}))),n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(r){var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r];s=e.fieldValue(s,t),s===null||typeof s=="undefined"||s.constructor==Array&&!s.length||(s.constructor==Array?e.merge(n,s):n.push(s))}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){s=t.selectedIndex;if(s<0)return null;n=[],t=t.options,r=(i=i=="select-one")?s+1:t.length;for(s=i?s:0;s<r;s++){var o=t[s];if(o.selected){var u=o.value;u||(u=o.attributes&&o.attributes.value&&!o.attributes.value.specified?o.text:o.value);if(i)return u;n.push(u)}}return n}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();e=="text"||e=="password"||t=="textarea"?this.value="":e=="checkbox"||e=="radio"?this.checked=!1:t=="select"&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;n=="checkbox"||n=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(n=e(this).parent("select"),t&&n[0]&&n[0].type=="select-one"&&n.find("option").selected(!1),this.selected=t)})}}(jQuery),define("jquerytools-form",function(){});var bugRiddenCrashPronePieceOfJunk=navigator.userAgent.indexOf("MSIE 5")!==-1&&navigator.userAgent.indexOf("Mac")!==-1,W3CDOM=!bugRiddenCrashPronePieceOfJunk&&typeof document.getElementsByTagName!="undefined"&&typeof document.createElement!="undefined",registerEventListener=function(e,t,n){jQuery(e).bind(t,n)},unRegisterEventListener=function(e,t,n){jQuery(e).unbind(t,n)},registerPloneFunction=jQuery;define("register-function",function(){}),define("nodeutilities",function(){}),define("cookie_functions",function(){});var livesearch=function(){function i(n,r){function c(){a.hide(),i=null}function h(){window.setTimeout('livesearch.hide("'+n.attr("id")+'")',t)}function p(e){a.show(),f.html(e)}function d(){if(i===r.value)return;i=r.value,s&&s.readyState<4&&s.abort();if(r.value.length<2){c();return}var e={q:r.value};l.length&&l[0].checked&&(e.path=l.val()),e=jQuery.param(e);if(o[e]){p(o[e]);return}s=jQuery.get(u,e,function(t){p(t),o[e]=t},"text")}function v(){window.setTimeout('livesearch.search("'+n.attr("id")+'")',e)}var i=null,s=null,o={},u=n.attr("action").replace(/@@search$/g,"")+"livesearch_reply",a=n.find("div.LSResult"),f=n.find("div.LSShadow"),l=n.find('input[name="path"]');return{hide:c,hide_delayed:h,search:d,search_delayed:v}}function s(t){function o(){var e=s.find("li.LSHighlight").removeClass(r),t=e.prev("li");return t.length||(t=s.find("li:last")),t.addClass(r),!1}function u(){var e=s.find("li.LSHighlight").removeClass(r),t=e.next("li");return t.length||(t=s.find("li:first")),t.addClass(r),!1}function a(){s.find("li.LSHighlight").removeClass(r),i.hide()}function f(r){window.clearTimeout(n);switch(r.keyCode){case 38:return o();case 40:return u();case 27:return a();case 37:break;case 39:break;default:n=window.setTimeout('livesearch.search("'+t.attr("id")+'")',e)}}function l(){var e=s.find("li.LSHighlight a").attr("href");if(!e)return;return window.location=e,!1}var n=null,i=t.find("div.LSResult"),s=t.find("div.LSShadow");return{handler:f,submit:l}}function o(e){var t="livesearch"+e,r=jQuery(this).parents("form:first"),o=s(r);n[t]=i(r,this),r.attr("id",t).submit(o.submit),jQuery(this).attr("autocomplete","off").keydown(o.handler).focus(n[t].search_delayed).blur(n[t].hide_delayed)}var e=400,t=400,n={},r="LSHighlight";return jQuery(function(){jQuery("#searchGadget,input.portlet-search-gadget").each(o)}),{search:function(e){n[e].search()},hide:function(e){n[e].hide()}}}();define("livesearch",function(){}),jQuery(function(e){var t,n,r,i,s,o={},u=e("#search-results");e.fn.pullSearchResults=function(t){return this.each(function(){var n=e(this);e.get("@@updated_search",t,function(r){n.hide(),e("#ajax-search-res").length===0&&e("body").append('<div id="ajax-search-res"></div>'),e("#ajax-search-res").html(r);var i=e("#ajax-search-res #search-results > *"),s=e("#ajax-search-res #updated-search-term").text(),o=e("#ajax-search-res #updated-search-results-number").text(),u=e("#ajax-search-res #updated-sorting-options").html();n.html(i),n.fadeIn(),e("#search-term").length===0&&e("h1.documentFirstHeading").append('<strong id="search-term" />'),e("#search-term").text(s),e("#search-results-number").text(o),e("#search-results-bar #sorting-options").html(u),e("#ajax-search-res").empty(),e("#rss-subscription a.link-feed").attr("href",function(){return portal_url+"/search_rss?"+t})})})},n=function(e){if(Modernizr.history){var t=portal_url+"/@@search?"+e;history.pushState(null,null,t)}},i="state"in window.history,s=location.href,e(window).bind("popstate",function(n){var r,o;r=!i&&location.href===s,i=!0;if(r)return;if(!location.search)return;t=location.search.split("?")[1];var a=t.match(/SearchableText=[^&]*/);a&&(o=a[0],o=o.replace(/\+/g," "),e('#search-field input[name="SearchableText"], input#searchGadget').val(o.substr(15,o.length)),u.pullSearchResults(t))}),e('#search-filter input.searchPage[type="submit"]').hide(),e("#search-field input.searchButton").click(function(t){var r,i=location.search.substring(1),s=/([^&=]+)=([^&]*)/g,o,a={};while(o=s.exec(i))a[decodeURIComponent(o[1])]=decodeURIComponent(o[2]);r=e('#search-field input[name="SearchableText"]').val(),a.SearchableText=r,i=e.param(a),u.pullSearchResults(i),n(i),t.preventDefault()}),e("form.searchPage").submit(function(r){t=e("form.searchPage").serialize(),u.pullSearchResults(t),n(t),r.preventDefault()}),e('#search-field input[name="SearchableText"]').keyup(function(){e("input#searchGadget").val(e(this).val())}),e("#search-results-bar dl.actionMenu > dd.actionMenuContent").click(function(e){e.stopImmediatePropagation()}),e("#search-filter input, #search-filter select").not("input#pt_toggle").live("change",function(r){t=e("form.searchPage").serialize(),u.pullSearchResults(t),n(t),r.preventDefault()}),e("#sorting-options a").live("click",function(r){e(this).attr("data-sort")?e("form.searchPage input[name='sort_on']").val(e(this).attr("data-sort")):e("form.searchPage input[name='sort_on']").val(""),t=this.search.split("?")[1],u.pullSearchResults(t),n(t),r.preventDefault()}),e("#search-results .listingBar a").live("click",function(e){t=this.search.split("?")[1],u.pullSearchResults(t),n(t),e.preventDefault()})}),define("search",function(){}),define("select_all",function(){});var ploneDnDReorder={};ploneDnDReorder.dragging=null,ploneDnDReorder.table=null,ploneDnDReorder.rows=null,ploneDnDReorder.locked=!1,function(e){ploneDnDReorder.doDown=function(t){var n=ploneDnDReorder.dragging,r;if(ploneDnDReorder.locked)return;if(n){e(this).attr("id")!==n.attr("id")&&(ploneDnDReorder.locked=!0,n.removeClass("dragging").addClass("error"));return}n=e(this).parents(".draggable:first");if(!n.length)return;return ploneDnDReorder.rows.mousemove(ploneDnDReorder.doDrag),r=e("body"),r.mouseup(ploneDnDReorder.doUp),r.mouseleave(ploneDnDReorder.doCancel),ploneDnDReorder.dragging=n,n.data("ploneDnDReorder.startPosition",ploneDnDReorder.getPos(n)),n.addClass("dragging"),e(this).parents("tr").addClass("dragindicator"),n.data("ploneDnDReorder.subset_ids",e.map(ploneDnDReorder.table.find("tr.draggable"),function(t){return e(t).attr("id").substr("folder-contents-item-".length)})),!1},ploneDnDReorder.getPos=function(e){var t=e.parent().children(".draggable").index(e[0]);return t===-1?null:t},ploneDnDReorder.doDrag=function(t){var n=ploneDnDReorder.dragging,r=this;if(!n)return;if(!r)return;return e(r).attr("id")!==n.attr("id")&&ploneDnDReorder.swapElements(e(r),n),!1},ploneDnDReorder.swapElements=function(t,n){var r=t.parent(),i=r.children("[id]"),s;if(Math.abs(ploneDnDReorder.getPos(t)-ploneDnDReorder.getPos(n))!==1)return;i.removeClass("even").removeClass("odd"),t[0].swapNode?t[0].swapNode(n[0]):(s=r[0].insertBefore(document.createTextNode(""),t[0]),t.insertBefore(n),n.insertBefore(s),e(s).remove()),r.children("[id]:odd").addClass("even"),r.children("[id]:even").addClass("odd")},ploneDnDReorder.doUp=function(t){var n=ploneDnDReorder.dragging,r=e("body");if(!n)return;return ploneDnDReorder.updatePositionOnServer(),n.removeData("ploneDnDReorder.startPosition"),n.removeData("ploneDnDReorder.subset_ids"),ploneDnDReorder.rows.unbind("mousemove",ploneDnDReorder.doDrag),r.unbind("mouseup",ploneDnDReorder.doUp),r.unbind("mouseleave",ploneDnDReorder.doCancel),e(this).parents("tr").removeClass("dragindicator"),!1},ploneDnDReorder.doCancel=function(t){var n=ploneDnDReorder.dragging,r=e("body");if(!n)return;return n.removeClass("dragging"),n.removeClass("dragindicator"),ploneDnDReorder.getPos(n)-n.data("ploneDnDReorder.startPosition")&&(ploneDnDReorder.locked=!0,n.addClass("error")),ploneDnDReorder.rows.unbind("mousemove",ploneDnDReorder.doDrag),r.unbind("mouseup",ploneDnDReorder.doCancel),r.unbind("mouseleave",ploneDnDReorder.doCancel),ploneDnDReorder.dragging=null,!1},ploneDnDReorder.updatePositionOnServer=function(){var t=ploneDnDReorder.dragging,n,r,i;if(!t)return;n=ploneDnDReorder.getPos(t)-t.data("ploneDnDReorder.startPosition");if(n===0){ploneDnDReorder.doCancel.call();return}r={item_id:t.attr("id").substr("folder-contents-item-".length),subset_ids:t.data("ploneDnDReorder.subset_ids")},r["delta:int"]=n,i=e.param(r).replace(/%5B%5D=/g,"%3Alist="),e.ajax({type:"POST",url:"folder_moveitem",data:i,complete:ploneDnDReorder.complete}),ploneDnDReorder.locked=!0},ploneDnDReorder.complete=function(e,t){var n=ploneDnDReorder.dragging;n.removeClass("dragging"),n.removeClass("dragindicator"),t==="success"||t==="notmodified"?ploneDnDReorder.locked=!1:n.addClass("error"),ploneDnDReorder.dragging=null}}(jQuery),define("dragdropreorder",function(){}),jQuery(function(e){e(activateCollapsibles)}),define("collapsiblesections",function(){});var ploneFormTabbing={jqtConfig:{current:"selected"}};(function(e){ploneFormTabbing._buildTabs=function(t,n){var r=n.length>6,i,s=[],o="";for(var u=0;u<n.length;u++){var a,f,l=n[u],c=l.id;s[u]="#"+c;switch(u){case 0:a='class="formTab firstFormTab"';break;case n.length-1:a='class="formTab lastFormTab"';break;default:a='class="formTab"'}r?(f="<option "+a+' id="'+c+'" value="'+c+'">',f+=e(l).text()+"</option>"):(f="<li "+a+'><a id="'+c+'" href="#'+c+'"><span>',f+=e(l).text()+"</span></a></li>"),o+=f,e(l).hide()}return s=s.join(","),i=s.replace(/#fieldsetlegend-/g,"#fieldset-"),r?(o=e('<select class="formTabs">'+o+"</select>"),o.change(function(){var t=e(this).attr("value");e(this).parent().find("option#"+t).click()})):o=e('<ul class="formTabs">'+o+"</ul>"),o},ploneFormTabbing.initializeDL=function(){var t=e(ploneFormTabbing._buildTabs(this,e(this).children("dt"))),n=e(this).children("dd");e(this).before(t),n.addClass("formPanel"),t.tabs(n,ploneFormTabbing.jqtConfig)},ploneFormTabbing.initializeForm=function(){var t=e(this),n=t.children("fieldset");if(!n.length)return;var r=ploneFormTabbing._buildTabs(this,n.children("legend"));e(this).prepend(r),n.addClass("formPanel"),e(this).find('input[name="fieldset.current"]').addClass("noUnloadProtection"),e(this).find(".formPanel:has(div.field span.required)").each(function(){var t=this.id.replace(/^fieldset-/,"#fieldsetlegend-");e(t).addClass("required")});var i=0,s=0,o=!1;e(this).find(".formPanel").each(function(){!o&&e(this).find("div.field.error").length!=0&&(i=s,o=!0),s+=1});var u="ul.formTabs";e(r).is("select.formTabs")&&(u="select.formTabs");var a=e.extend({},ploneFormTabbing.jqtConfig,{initialIndex:i});t.children(u).tabs(t.children("fieldset.formPanel"),a),t.submit(function(){var e;r.find("a.selected").length>=1?e=r.find("a.selected").attr("href").replace(/^#fieldsetlegend-/,"#fieldset-"):e=r.attr("value").replace(/^fieldsetlegend-/,"#fieldset-");var n=t.find('input[name="fieldset.current"]');e&&n&&n.val(e)}),e("#archetypes-schemata-links").addClass("hiddenStructure"),e("div.formControls input[name='form.button.previous'],div.formControls input[name='form.button.next']").remove()},e.fn.ploneTabInit=function(t){return this.each(function(){var t=e(this);t.find("form.enableFormTabbing,div.enableFormTabbing").each(ploneFormTabbing.initializeForm),t.find("dl.enableFormTabbing").each(ploneFormTabbing.initializeDL);var n=t.find('.enableFormTabbing input[name="fieldset.current"]').val()||window.location.hash;n&&t.find(".enableFormTabbing .formTab a[href='"+n.replace("'","").replace(/^#fieldset-/,"#fieldsetlegend-")+"']").click()})},ploneFormTabbing.initialize=function(){e("body").ploneTabInit()}})(jQuery),jQuery(function(){ploneFormTabbing.initialize()}),define("form_tabbing",function(){});var common_content_filter="#content>*:not(div.configlet),dl.portalMessage.error,dl.portalMessage.info";jQuery.extend(jQuery.tools.overlay.conf,{fixed:!1,speed:"fast",mask:{color:"#fff",opacity:.4,loadSpeed:0,closeSpeed:0}}),function(e){e.plonepopups=e.plonepopups||{},e.extend(e.plonepopups,{noformerrorshow:function(n,r){var i=e(n),s=i.find("dl.portalMessage.error");return s.length?(i.children().replaceWith(s),!1):r},redirectbasehref:function(t,n){var r=n.match(/<base href="(\S+?)"/i);return r.length===2?r[1]:location}})}(jQuery),jQuery(function(e){if(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7)return;e('#portal-personaltools a[href$="/login"], #portal-personaltools a[href$="/login_form"], .discussion a[href$="/login"], .discussion a[href$="/login_form"]').prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"form#login_form",noform:"redirect",redirect:function(t,n){var r=location.href;if(r.search(/pwreset_finish$/)>=0)return r.slice(0,r.length-14)+"logged_in";var i=e("<div>").html(n).find("base").attr("href");return e.trim(i)&&i!==location.href?i:r}}),e("#siteaction-contact a").prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:'form[name="feedback_form"]',noform:function(t){return e.plonepopups.noformerrorshow(t,"close")}}),e('form[name="reply"]').prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:'form:has(input[name="discussion_reply:method"])',noform:function(t){return e.plonepopups.noformerrorshow(t,"redirect")},redirect:e.plonepopups.redirectbasehref}),e("#contextSetDefaultPage, #folderChangeDefaultPage").prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:'form[name="default_page_form"]',noform:function(t){return e.plonepopups.noformerrorshow(t,"reload")},closeselector:'[name="form.button.Cancel"]',width:"40%"}),e("dl#plone-contentmenu-actions a#delete").prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"#delete_confirmation",noform:function(t){return e.plonepopups.noformerrorshow(t,"redirect")},redirect:e.plonepopups.redirectbasehref,closeselector:'[name="form.button.Cancel"]',width:"50%"}),e("dl#plone-contentmenu-actions a#rename").prepOverlay({subtype:"ajax",filter:common_content_filter,closeselector:'[name="form.button.Cancel"]',width:"40%"}),e('#portal-personaltools a[href$="/@@register"]').prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:"form.kssattr-formname-register"}),e('form[name="users_add"], form[name="groups_add"]').prepOverlay({subtype:"ajax",filter:common_content_filter,formselector:'form.kssattr-formname-new-user, form[name="groups"]',noform:function(t){return e.plonepopups.noformerrorshow(t,"redirect")},redirect:function(){return location.href}}),e("#content-history a").prepOverlay({subtype:"ajax",filter:"h2, #content-history",urlmatch:"@@historyview",urlreplace:"@@contenthistorypopup"})}),define("popupforms",function(){}),function(e){var t,n,r,i;t=function(t){e.extend(this,t),this.terms=this.cleanTerms(this.terms.length?this.terms:this.getSearchTerms())},t.prototype={highlight:function(t){if(!this.terms.length||!t.length)return;var n=this;e.each(this.terms,function(e,r){t.find("*:not(textarea)").andSelf().contents().each(function(){this.nodeType===3&&n.highlightTermInNode(this,r)})})},highlightTermInNode:function(t,n){var r=t.nodeValue,i=this,s,o,u,a;if(e(t).parent().hasClass(i.highlightClass))return;s=function(t){return e('<span class="'+i.highlightClass+'">dummy</span>').text(t)},o=i.caseInsensitive;while(r&&(u=(o?r.toLowerCase():r).indexOf(n))>-1)e(t).before(document.createTextNode(r.substr(0,u))).before(s(r.substr(u,n.length))).before(document.createTextNode(r.substr(u+n.length))),a=t.previousSibling,e(t).remove(),t=a,r=t.nodeValue},queryStringValue:function(e,t){var n,r;if(e.indexOf("?")<0)return"";e=e.substr(e.indexOf("?")+1);while(e.indexOf("=")>=0){e=e.replace(/^\&*/,""),r=e.split("&",1)[0],e=e.substr(r.length),n=r.match(t);if(n)return decodeURIComponent(n[n.length-1].replace(/\+/g," "))}return""},termsFromReferrer:function(){var t,n,r;t=e.fn.highlightSearchTerms._test_referrer!==null?e.fn.highlightSearchTerms._test_referrer:document.referrer;if(!t)return"";for(n=0;n<this.referrers.length;n+=1){r=this.referrers[n];if(t.match(r.address))return this.queryStringValue(t,r.key)}return""},cleanTerms:function(t){var n=this;return e.unique(e.map(t,function(t){return t=e.trim(n.caseInsensitive?t.toLowerCase():t),!t||n.filterTerms.test(t)?null:t}))},getSearchTerms:function(){var t=[],n=e.fn.highlightSearchTerms._test_location!==null?e.fn.highlightSearchTerms._test_location:location.href;return this.useReferrer&&e.merge(t,this.termsFromReferrer().split(/\s+/)),this.useLocation&&e.merge(t,this.queryStringValue(n,this.searchKey).split(/\s+/)),t}},n=function(e){return typeof e=="string"?new RegExp("^"+e+"=(.*)$","i"):e},r=function(e){return typeof e=="string"?new RegExp("^https?://(www\\.)?"+e,"i"):e},e.fn.highlightSearchTerms=function(s){s=e.extend({},i,s),s=e.extend(s,{searchKey:n(s.searchKey),referrers:e.map(s.referrers,function(e){return{address:r(e.address),key:n(e.key)}})});if(s.includeOwnDomain){var o=e.fn.highlightSearchTerms._test_location!==null?e.fn.highlightSearchTerms._test_location:location.hostname;s.referrers.push({address:r(o.replace(/\./g,"\\.")),key:s.searchKey})}return(new t(s)).highlight(this),this},e.fn.highlightSearchTerms.referrers=[{address:"google\\.",key:"q"},{address:"search\\.yahoo\\.",key:"p"},{address:"search\\.msn\\.",key:"q"},{address:"search\\.live\\.",key:"query"},{address:"search\\.aol\\.",key:"userQuery"},{address:"ask\\.com",key:"q"},{address:"altavista\\.",key:"q"},{address:"feedster\\.",key:"q"}],i={terms:[],useLocation:!0,searchKey:"(searchterm|SearchableText)",useReferrer:!0,referrers:e.fn.highlightSearchTerms.referrers,includeOwnDomain:!0,caseInsensitive:!0,filterTerms:/(not|and|or)/i,highlightClass:"highlightedSearchTerm"},e.fn.highlightSearchTerms._test_location=null,e.fn.highlightSearchTerms._test_referrer=null,e.fn.highlightSearchTerms._highlighter=t}(jQuery),jQuery(function(e){e("#region-content,#content").highlightSearchTerms({includeOwnDomain:e("dl.searchResults").length===0})}),define("jquery.highlightsearchterms",function(){}),jQuery(function(e){if(e("form div.error :input:first").focus().length)return;e("form.enableAutoFocus :input:not(.formTabs):visible:first").focus()}),define("first_input_focus",function(){}),jQuery(function(e){var t=readCookie("fontsize");t&&setBaseFontSize(t,0)}),define("accessibility",function(){}),jQuery(function(){var e=readCookie("wstyle");e&&setActiveStyleSheet(e,0)}),define("styleswitcher",function(){}),jQuery(function(e){var t,n,r,i,s,o,u,a,f;t=e("dl.toc dd.portletItem"),n=e("#region-content,#content");if(!n||!t.length)return;t.empty(),r=window.location.href,window.location.hash&&(r=r.substring(0,r.lastIndexOf(window.location.hash))),i=[],e(n).find("*").not(".comment > h3").filter(function(){return/^h[1234]$/.test(this.tagName.toLowerCase())}).not(".documentFirstHeading").each(function(t){var n,s,o;n=this.nodeName.charAt(1);while(i.length<n)s=e("<ol>"),i.length&&(o=e(i[i.length-1]).children("li:last"),o.length||(o=e("<li>").appendTo(e(i[i.length-1]))),o.append(s)),i.push(s);while(i.length>n)i.pop();e(this).before(e('<a name="section-'+t+'" />')),e("<li>").append(e("<a />").attr("href",r+"#section-"+t).text(e(this).text())).appendTo(e(i[i.length-1]))});if(i.length){var s=e(i[0]),l=1;while(s.children("li").length==1)s=e(i[l]),l+=1;l<=i.length&&e("dl.toc").show(),o=s.children().length.toString().length,s.addClass("TOC"+o+"Digit"),t.append(s),u=window.location.hash,u&&(a=e(u),a=a.length&&a||e('[name="'+u.slice(1)+'"]'),f=a.offset(),f&&e("html,body").animate({scrollTop:f.top},0))}}),define("toc",function(){}),function(e){e.fn.do_search_collapse=function(){function t(t){var n=e(t);return n.find("input[id$=_toggle]:checkbox").length>0&&n.find("input[id$=_toggle]:checkbox:checked").length===0?!0:n.find(":text[value]").length>0?!0:n.find("select .default_option").length>0&&n.find("select .default_option:selected").length===0?!0:!1}return this.each(function(){var n=e(this).find(".collapser:first"),r=e(this).find(".collapse:first");n.click(function(){var t=e(this).parent(),n=t.find(".collapse:first");n.slideToggle("normal"),e(this).toggleClass("expanded"),e(this).toggleClass("collapsed")}),t(this)?n.addClass("expanded"):(r.hide(),n.addClass("collapsed"))})},jQuery(function(e){e(".field.collapsible").do_search_collapse()})}(jQuery),define("collapsibleformfields",function(){}),function(e){e.createReplyForm=function(t){var n=t.attr("id"),r=t.find(".reply-to-comment-button"),i=e("#commenting").clone(!0);i.find("#formfield-form-widgets-captcha").find("script").remove(),i.appendTo(t).css("display","none"),i.removeAttr("id"),e(r).css("display","none");var s=i.find("form");s.find("input[name='form.widgets.in_reply_to']").val(n);var o=i.find(".cancelreplytocomment");o.attr("id",n),s.find("input[name='form.buttons.cancel']").css("display","inline"),i.slideDown("slow"),o.css("display","inline")},e.clearForm=function(e){e.find(".error").removeClass("error"),e.find(".fieldErrorBox").remove(),e.find("input[type='text']").attr("value",""),e.find("textarea").attr("value","")},e(window).load(function(){var t=e("#commenting"),n=t.find("input[name='form.widgets.in_reply_to']");if(n.val()!==""){var r="#"+n.val(),i=e(".discussion").find(r);e.createReplyForm(i),e.clearForm(t)}e(".reply-to-comment-button").bind("click",function(t){var n=e(this).parents().filter(".comment");e.createReplyForm(n),e.clearForm(n)}),e("#commenting #form-buttons-cancel").bind("click",function(t){t.preventDefault();var n=e(this).parents().filter(".comment").find(".reply-to-comment-button");e.reply_to_comment_form=e(this).parents().filter(".reply"),e.reply_to_comment_form.slideUp("slow",function(){e(this).remove()}),n.css("display","inline")}),e("input[name='form.button.PublishComment']").live("click",function(){var t=this,n=e(this).parents("form"),r=e(n).serialize(),i=e(n).attr("action");return e.ajax({type:"GET",url:i,data:"workflow_action=publish",context:t,success:function(e){n.find("input[name='form.button.PublishComment']").remove(),n.parents(".state-pending").toggleClass("state-pending").toggleClass("state-published")},error:function(e){return!0}}),!1}),e("input[name='form.button.DeleteComment']").live("click",function(){var t=this,n=e(this).parents("form"),r=e(n).serialize(),i=e(n).attr("action");return e.ajax({type:"POST",url:i,context:e(t).parents(".comment"),success:function(t){var n=e(this),r=n.attr("class"),i=parseInt(r[r.indexOf("replyTreeLevel")+"replyTreeLevel".length],10),s=".replyTreeLevel"+i;for(var o=0;o<i;o++)s+=", .replyTreeLevel"+o;n.nextUntil(s).each(function(){e(this).fadeOut("fast",function(){e(this).remove()})}),e(this).fadeOut("fast",function(){e(this).remove()})},error:function(e,t){return!0}}),!1}),e(".reply").find("input[name='form.buttons.reply']").css("display","none"),e(".reply").find("input[name='form.buttons.cancel']").css("display","none"),e(".reply-to-comment-button").css("display","inline")})}(jQuery),define("comments",function(){}),jQuery(initializeMenus),define("dropdown",function(){}),function(e){function t(e){var t,n;return t=new RegExp("sortabledata-([^ ]*)","g"),n=t.exec(e.attr("class")),n?n[1]:null}function n(e){var n=t(e);return n===null&&(n=e.text()),n.charAt(4)!=="-"&&n.charAt(7)!=="-"&&!isNaN(parseFloat(n))?parseFloat(n):n.toLowerCase()}function r(){var t,r,s,o,u,a,f,l,c;t=e(this).closest("th"),r=e("th",e(this).closest("thead")).index(t),s=e(this).parents("table:first"),o=s.find("tbody:first"),c=parseInt(s.attr("sorted")||"-1",10),u=c===r,e(this).parent().find("th:not(.nosort) .sortdirection").html("&#x2003;"),e(this).children(".sortdirection").html(u?"&#x25b2;":"&#x25bc;"),a=e(this).parent().children("th").index(this),f=[],l=!0,o.find("tr").each(function(){var t,r;t=e(this).children("td"),r=n(t.slice(a,a+1)),isNaN(r)&&(l=!1),f.push([r,n(t.slice(1,2)),n(t.slice(0,1)),this])}),f.length&&(l?f.sort(function(e,t){return e[0]-t[0]}):f.sort(),u&&f.reverse(),s.attr("sorted",u?"":r),o.append(e.map(f,function(e){return e[3]})),o.each(i))}function i(){var t=e(this);t.find("tr").removeClass("odd").removeClass("even").filter(":odd").addClass("even").end().filter(":even").addClass("odd")}e(function(){var t=e("<span>&#x2003;</span>").addClass("sortdirection");e("table.listing:not(.nosort) thead th:not(.nosort)").append(t.clone()).css("cursor","pointer").click(r),e("table.listing:not(.nosort) tbody").each(i)})}(jQuery),define("table_sorter",function(){});if(typeof plone=="undefined")var plone={};(function(e){plone.jscalendar={_calendar:null,_current_input:null,_field_names:["year","month","day","hour","minute","ampm"],_fields:function(t){t===undefined&&(t=plone.jscalendar._current_input);var n={field:e(t)};return e.each(plone.jscalendar._field_names,function(){n[this]=e(t+"_"+this)}),n},init:function(){e(".plone_jscalendar").find("input:hidden").each(function(){var t="#"+this.id;e.each(plone.jscalendar._fields(t),function(){this.filter("select").bind("change.plone.jscalendar",{selector:t},plone.jscalendar.update_hidden)})})},show:function(e,t,n){var r=plone.jscalendar._cal,i,s;return r?r.hide():(r=plone.jscalendar._cal=new Calendar(1,null,plone.jscalendar.handle_select,plone.jscalendar.handle_close),r.create()),plone.jscalendar._current_input=e,i=plone.jscalendar._fields(),s=i.month,r.setRange(t,n),i.year.val()>0&&r.date.setFullYear(i.year.val()),i.month.val()>0&&r.date.setMonth(i.month.val()-1),i.day.val()>0&&r.date.setDate(i.day.val()),r.refresh(),r.showAtElement(s.get(0),null),!1},handle_select:function(t,n){var r=plone.jscalendar._fields(),i=n.substring(0,4),s,o;if(e.nodeName(r.year.get(0),"select")&&!r.year.children("option[value="+i+"]").length){s=r.year.get(0).options;for(o=s.length;o>0;o-=1){if(!(s[o].value>i)){s[o+1]=new Option(i,i);break}s[o+1]=new Option(s[o].value,s[o].text)}}r.year.val(i),r.month.val(n.substring(5,7)),r.day.val(n.substring(8,10)),plone.jscalendar.update_hidden()},handle_close:function(e){e.hide()},update_hidden:function(t){var n="",r=plone.jscalendar._fields(t&&t.data.selector),i,s,o;t&&t.target.selectedIndex===0?(i=t.target.id.substr(t.data.selector.length),s=e.inArray(i,["hour","minute","ampm"])>-1?"select[id$=hour],select[id$=minute],select[id$=ampm]":"select",e.each(r,function(){this.filter(s).attr("selectedIndex",0)})):r.year.val()>0&&r.month.val()>0&&r.day.val()>0&&(n=[r.year.val(),r.month.val(),r.day.val()].join("-"),o=new Date(n.replace(/-/g,"/")),o.print("%Y-%m-%d")!==n&&(n=o.print("%Y-%m-%d"),r.year.val(n.substring(0,4)),r.month.val(n.substring(5,7)),r.day.val(n.substring(8,10))),r.hour.length&&r.minute.length&&(n+=" "+[r.hour.val(),r.minute.val()].join(":"),r.ampm.length&&(n+=" "+r.ampm.val()))),r.field.val(n)}}})(jQuery),jQuery(function(e){e(plone.jscalendar.init),e(".plone-jscalendar-popup").each(function(){var t=e(this),n=this.id.replace("_popup",""),r=e("#"+n+"_yearStart").val(),i=e("#"+n+"_yearEnd").val();r&&i&&t.css("cursor","pointer").show().click(function(e){return plone.jscalendar.show("#"+n,r,i)})})}),define("calendar_formfield",function(){}),window.beforeunload||function(e){var t,n,r,i;t=function(){var t=this,n;this.message=window.form_modified_message||"Discard changes? If you click OK, any changes you have made will be lost.",this.forms=[],this.chkId=[],this.chkType=new this.CheckType,this.handlers=[this.isAnyFormChanged],this.submitting=!1,this.execute=function(r){var i=e("form");t.forms=e.grep(t.forms,function(e){return i.index(e)>-1});if(t.submitting)return;return e.each(t.handlers,function(e,r){n=n||r.apply(t)}),n===!0&&(n=t.message),n===!1&&(n=undefined),r&&n&&(r.returnValue=n),n},this.execute.tool=this},n=t.prototype,n.isAnyFormChanged=function(){var e;for(e=0;e<this.forms.length;e+=1){r=this.forms[e];if(this.isElementChanged(r))return!0}return!1},n.addHandler=function(e){this.handlers.push(e)},n.onsubmit=function(){var e=window.onbeforeunload&&window.onbeforeunload.tool;e.submitting=!0,plone.UnlockHandler.submitting=!0},n.addForm=function(t){if(e.inArray(t,this.forms)>-1)return;this.forms.push(t),e(t).submit(this.onsubmit),e(t).find("input:hidden").each(function(){var t=this.defaultValue;t!==undefined&&t!==null&&!e(this).attr("originalValue")&&e(this).attr("originalValue",t.replace(/\r\n?/g,"\n"))})},n.addForms=function(){var t=this;e.each(arguments,function(){this.tagName.toLowerCase()==="form"?t.addForm(this):t.addForms.apply(t,e(this).find("form").get())})},n.removeForms=function(){var t=this;e.each(arguments,function(){if(this.tagName.toLowerCase()==="form"){var n=this;t.forms=e.grep(t.forms,function(e){return e!==n}),e(n).unbind("submit",t.onsubmit)}else t.removeForms.apply(t,e(this).find("form").get())})},n.CheckType=function(){},i=n.CheckType.prototype,i.checkbox=i.radio=function(e){return e.checked!==e.defaultChecked},i.file=i.password=i.textarea=i.text=function(e){return e.value!==e.defaultValue},i.hidden=function(t){var n=e(t).attr("originalValue");return n===undefined||n===null?!1:e(t).val().replace(/\r\n?/g,"\n")!==n},i["select-one"]=function(e){var t,n;for(t=0;t<e.length;t+=1){n=e[t];if(n.selected!==n.defaultSelected){if(t===0&&n.selected)continue;return!0}}return!1},i["select-multiple"]=function(e){var t,n;for(t=0;t<e.length;t+=1){n=e[t];if(n.selected!==n.defaultSelected)return!0}return!1},n.chk_form=function(t){var n=e(t).find("> :input:not(.noUnloadProtection),:not(.noUnloadProtection) :input:not(.noUnloadProtection)"),r;for(r=0;r<n.length;r+=1)if(this.isElementChanged(n.get(r)))return!0;return!1},n.isElementChanged=function(e){var t=e.id&&this.chkId[e.id];return!t&&e.type&&e.name&&(t=this.chkType[e.type]),!t&&e.tagName&&(t=this["chk_"+e.tagName.toLowerCase()]),t?t.call(this,e):!1},window.onbeforeunload=(new t).execute,e(function(){var t=window.onbeforeunload&&window.onbeforeunload.tool;t&&e("#region-content,#content").length&&t.addForms.apply(t,e("form.enableUnloadProtection").get())})}(jQuery),define("formUnload",function(){}),function(e){e(function(){e("input:submit").each(function(){this.onclick||e(this).click(inputSubmitOnClick)})})}(jQuery),define("formsubmithelpers",function(){});if(typeof plone=="undefined")var plone={};(function(e){plone.UnlockHandler={init:function(){e("form.enableUnlockProtection").length&&(e(window).unload(plone.UnlockHandler.execute),plone.UnlockHandler._refresher=setInterval(plone.UnlockHandler.refresh,3e5))},cleanup:function(){e(window).unbind("unload",plone.UnlockHandler.execute),clearInterval(plone.UnlockHandler._refresher)},execute:function(){if(this.submitting)return;e.ajax({url:plone.UnlockHandler._baseUrl()+"/@@plone_lock_operations/safe_unlock",async:!1})},refresh:function(){if(this.submitting)return;e.get(plone.UnlockHandler._baseUrl()+"/@@plone_lock_operations/refresh_lock")},_baseUrl:function(){var t,n;return t=e("base").attr("href"),t||(n=window.location.href.split("/"),n.pop(),t=n.join("/")),t}},e(plone.UnlockHandler.init)})(jQuery),define("unlockOnFormUnload",function(){}),function(e){e.fn.extend({autocomplete:function(t,n){var r=typeof t=="string";return n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,n){function p(){var e=c.selected();if(!e)return!1;var t=e.result;o=t;if(n.multiple){var r=v(i.val());r.length>1&&(t=r.slice(0,r.length-1).join(n.multipleSeparator)+n.multipleSeparator+t),t+=n.multipleSeparator}return i.val(t),b(),i.trigger("result",[e.data,e.value]),!0}function d(e,t){if(f==r.DEL){c.hide();return}var s=i.val();if(!t&&s==o)return;o=s,s=m(s),s.length>=n.minChars?(i.addClass(n.loadingClass),n.matchCase||(s=s.toLowerCase()),E(s,w,b)):(x(),c.hide())}function v(t){if(!t)return[""];var r=t.split(n.multipleSeparator),i=[];return e.each(r,function(t,n){e.trim(n)&&(i[t]=e.trim(n))}),i}function m(e){if(!n.multiple)return e;var t=v(e);return t[t.length-1]}function g(s,u){n.autoFill&&m(i.val()).toLowerCase()==s.toLowerCase()&&f!=r.BACKSPACE&&(i.val(i.val()+u.substring(m(o).length)),e.Autocompleter.Selection(t,o.length,o.length+u.length))}function y(){clearTimeout(s),s=setTimeout(b,200)}function b(){var r=c.visible();c.hide(),clearTimeout(s),x(),n.mustMatch&&i.search(function(e){if(!e)if(n.multiple){var t=v(i.val()).slice(0,-1);i.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""))}else i.val("")}),r&&e.Autocompleter.Selection(t,t.value.length,t.value.length)}function w(e,t){t&&t.length&&a?(x(),c.display(t,e),g(e,t[0].value),c.show()):b()}function E(r,i,s){n.matchCase||(r=r.toLowerCase());var o=u.load(r);if(o&&o.length)i(r,o);else if(typeof n.url=="string"&&n.url.length>0){var a={timestamp:+(new Date)};e.each(n.extraParams,function(e,t){a[e]=typeof t=="function"?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:m(r),limit:n.max},a),success:function(e){var t=n.parse&&n.parse(e)||S(e);u.add(r,t),i(r,t)}})}else c.emptyList(),s(r)}function S(t){var r=[],i=t.split("\n");for(var s=0;s<i.length;s++){var o=e.trim(i[s]);o&&(o=o.split("|"),r[r.length]={data:o,value:o[0],result:n.formatResult&&n.formatResult(o,o[0])||o[0]})}return r}function x(){i.removeClass(n.loadingClass)}var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},i=e(t).attr("autocomplete","off").addClass(n.inputClass),s,o="",u=e.Autocompleter.Cache(n),a=0,f,l={mouseDownOnSelect:!1},c=e.Autocompleter.Select(n,t,p,l),h;e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){if(h)return h=!1,!1}),i.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){f=t.keyCode;switch(t.keyCode){case r.UP:t.preventDefault(),c.visible()?c.prev():d(0,!0);break;case r.DOWN:t.preventDefault(),c.visible()?c.next():d(0,!0);break;case r.PAGEUP:t.preventDefault(),c.visible()?c.pageUp():d(0,!0);break;case r.PAGEDOWN:t.preventDefault(),c.visible()?c.pageDown():d(0,!0);break;case n.multiple&&e.trim(n.multipleSeparator)==","&&r.COMMA:case r.TAB:case r.RETURN:if(p())return t.preventDefault(),h=!0,!1;break;case r.ESC:c.hide();break;default:clearTimeout(s),s=setTimeout(d,n.delay)}}).focus(function(){a++}).blur(function(){a=0,l.mouseDownOnSelect||y()}).click(function(){a++>1&&!c.visible()&&d(0,!0)}).bind("search",function(){function n(e,n){var r;if(n&&n.length)for(var s=0;s<n.length;s++)if(n[s].result.toLowerCase()==e.toLowerCase()){r=n[s];break}typeof t=="function"?t(r):i.trigger("result",r&&[r.data,r.value])}var t=arguments.length>1?arguments[1]:null;e.each(v(i.val()),function(e,t){E(t,n,n)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&u.populate()}).bind("unautocomplete",function(){c.unbind(),i.unbind(),e(t.form).unbind(".autocomplete")})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function i(e,n){t.matchCase||(e=e.toLowerCase());var r=e.indexOf(n);return r==-1?!1:r==0||t.matchContains}function s(e,i){r>t.cacheLength&&u(),n[e]||r++,n[e]=i}function o(){if(!t.data)return!1;var n={},r=0;t.url||(t.cacheLength=1),n[""]=[];for(var i=0,o=t.data.length;i<o;i++){var u=t.data[i];u=typeof u=="string"?[u]:u;var a=t.formatMatch(u,i+1,t.data.length);if(a===!1)continue;var f=a.charAt(0).toLowerCase();n[f]||(n[f]=[]);var l={value:a,data:u,result:t.formatResult&&t.formatResult(u)||a};n[f].push(l),r++<t.max&&n[""].push(l)}e.each(n,function(e,n){t.cacheLength++,s(e,n)})}function u(){n={},r=0}var n={},r=0;return setTimeout(o,25),{flush:u,add:s,populate:o,load:function(s){if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){var o=[];for(var u in n)if(u.length>0){var a=n[u];e.each(a,function(e,t){i(t.value,s)&&o.push(t)})}return o}if(n[s])return n[s];if(t.matchSubset)for(var f=s.length-1;f>=t.minChars;f--){var a=n[s.substr(0,f)];if(a){var o=[];return e.each(a,function(e,t){i(t.value,s)&&(o[o.length]=t)}),o}}return null}}},e.Autocompleter.Select=function(t,n,r,i){function p(){if(!l)return;c=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),h=e("<ul/>").appendTo(c).mouseover(function(t){d(t).nodeName&&d(t).nodeName.toUpperCase()=="LI"&&(u=e("li",h).removeClass(s.ACTIVE).index(d(t)),e(d(t)).addClass(s.ACTIVE))}).click(function(t){return e(d(t)).addClass(s.ACTIVE),r(),n.focus(),!1}).mousedown(function(){i.mouseDownOnSelect=!0}).mouseup(function(){i.mouseDownOnSelect=!1}),t.width>0&&c.css("width",t.width),l=!1}function d(e){var t=e.target;while(t&&t.tagName!="LI")t=t.parentNode;return t?t:[]}function v(e){o.slice(u,u+1).removeClass(s.ACTIVE),m(e);var n=o.slice(u,u+1).addClass(s.ACTIVE);if(t.scroll){var r=0;o.slice(0,u).each(function(){r+=this.offsetHeight}),r+n[0].offsetHeight-h.scrollTop()>h[0].clientHeight?h.scrollTop(r+n[0].offsetHeight-h.innerHeight()):r<h.scrollTop()&&h.scrollTop(r)}}function m(e){u+=e,u<0?u=o.size()-1:u>=o.size()&&(u=0)}function g(e){return t.max&&t.max<e?t.max:e}function y(){h.empty();var n=g(a.length);for(var r=0;r<n;r++){if(!a[r])continue;var i=t.formatItem(a[r].data,r+1,n,a[r].value,f);if(i===!1)continue;var l=e("<li/>").html(t.highlight(i,f)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(h)[0];e.data(l,"ac_data",a[r])}o=h.find("li"),t.selectFirst&&(o.slice(0,1).addClass(s.ACTIVE),u=0),e.fn.bgiframe&&h.bgiframe()}var s={ACTIVE:"ac_over"},o,u=-1,a,f="",l=!0,c,h;return{display:function(e,t){p(),a=e,f=t,y()},next:function(){v(1)},prev:function(){v(-1)},pageUp:function(){u!=0&&u-8<0?v(-u):v(-8)},pageDown:function(){u!=o.size()-1&&u+8>o.size()?v(o.size()-1-u):v(8)},hide:function(){c&&c.hide(),o&&o.removeClass(s.ACTIVE),u=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(o.filter("."+s.ACTIVE)[0]||t.selectFirst&&o[0])},show:function(){var r=e(n).offset();c.css({width:typeof t.width=="string"||t.width>0?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show();if(t.scroll){h.scrollTop(0),h.css({maxHeight:t.scrollHeight,overflow:"auto"});if(e.browser.msie&&typeof document.body.style.maxHeight=="undefined"){var i=0;o.each(function(){i+=this.offsetHeight});var s=i>t.scrollHeight;h.css("height",s?t.scrollHeight:i),s||o.width(h.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}}},selected:function(){var t=o&&o.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){h&&h.empty()},unbind:function(){c&&c.remove()}}},e.Autocompleter.Selection=function(e,t,n){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n),r.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}}(jQuery),define("autocomplete",function(){}),define("formwidget-autocomplete",function(){}),jQuery&&function(e){e.extend(e.fn,{showDialog:function(){e(document.body).append(e(document.createElement("div")).addClass("contenttreeWindowBlocker")),this[0].oldparent=e(this).parent()[0],e(".contenttreeWindowBlocker").before(this),e(this).show(),e(this).width(e(window).width()*.75),e(this).height(e(window).height()*.75),e(this).css({left:e(window).width()*.125,top:e(window).height()*.125})},contentTreeAdd:function(){var t=this.parents(".contenttreeWindow"),n=e("#"+t[0].id.replace(/-contenttree-window$/,"-widgets-query"));t.find(".navTreeCurrentItem > a").each(function(){formwidget_autocomplete_new_value(n,e(this).attr("href"),e.trim(e(this).text()))}),e(this).contentTreeCancel()},contentTreeCancel:function(){e(".contenttreeWindowBlocker").remove();var t=e(this).parents(".contenttreeWindow");t.hide(),e(t[0].oldparent).append(t),t[0].oldparent=null},contentTree:function(t,n){function r(n,r,i){e(n).addClass("wait"),e.post(t.script,{href:r,rel:i},function(r){e(n).removeClass("wait").append(r),e(n).find("ul:hidden").slideDown({duration:t.expandSpeed}),o(n)})}function i(){var n=e(this).parent();return n.hasClass("collapsed")?(t.multiFolder||(n.parent().find("ul:visible").slideUp({duration:t.collapseSpeed}),n.parent().find("li.navTreeFolderish").removeClass("expanded").addClass("collapsed")),n.find("ul").length==0?r(n,escape(e(this).attr("href")),escape(e(this).attr("rel"))):n.find("ul:hidden").slideDown({duration:t.expandSpeed}),n.removeClass("collapsed").addClass("expanded")):(n.find("ul").slideUp({duration:t.collapseSpeed}),n.removeClass("expanded").addClass("collapsed")),!1}function s(r){var i=e(this).parent(),s=!0,o=e(this).parents("ul.navTree");if(!i.hasClass("navTreeCurrentItem")){var u=r.ctrlKey||navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1&&r.metaKey;(!t.multiSelect||!u)&&o.find("li.navTreeCurrentItem").removeClass("navTreeCurrentItem"),i.addClass("navTreeCurrentItem"),s=!0}else i.removeClass("navTreeCurrentItem"),s=!1;n(r,!0,e(this).attr("href"),e.trim(e(this).text()))}function o(n){e(n).find("li.navTreeFolderish a").unbind(t.folderEvent),e(n).find("li.selectable a").unbind(t.selectEvent),e(n).find("li a").bind("click",function(){return!1}),e(n).find("li.navTreeFolderish a").bind(t.folderEvent,i),e(n).find("li.selectable a").bind(t.selectEvent,s)}if(!t)var t={};t.script==undefined&&(t.script="fetch"),t.folderEvent==undefined&&(t.folderEvent="click"),t.selectEvent==undefined&&(t.selectEvent="click"),t.expandSpeed==undefined&&(t.expandSpeed=-1),t.collapseSpeed==undefined&&(t.collapseSpeed=-1),t.multiFolder==undefined&&(t.multiFolder=!0),t.multiSelect==undefined&&(t.multiSelect=!1),e(this).each(function(){o(e(this))})}})}(jQuery),define("contenttree",function(){}),function(e){function t(){return url=location.href,hashtag=url.indexOf("#!")!=-1?decodeURI(url.substring(url.indexOf("#!")+2,url.length)):!1,hashtag}function n(){if(typeof theRel=="undefined")return;location.hash="!"+theRel+"/"+rel_index+"/"}function r(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(t);return i==null?"":i[1]}e.prettyPhoto={version:"3.1.2"},e.fn.prettyPhoto=function(i){function m(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(p/2-u.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:u.contentHeight,width:u.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:d/2-u.containerWidth/2,width:u.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(u.height).width(u.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&E(pp_images[set_position])=="image"?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),u.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide(),settings.autoplay_slideshow&&!v&&!a&&e.prettyPhoto.startSlideshow(),settings.deeplinking&&n(),settings.changepicturecallback(),a=!0}),N()}function g(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function y(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function b(e,t){resized=!1,w(e,t),imageWidth=e,imageHeight=t;if((h>d||c>p)&&doresize&&settings.allow_resize&&!o){resized=!0,fitting=!1;while(!fitting)h>d?(imageWidth=d-200,imageHeight=t/e*imageWidth):c>p?(imageHeight=p-200,imageWidth=e/t*imageHeight):fitting=!0,c=imageHeight,h=imageWidth;w(imageWidth,imageHeight),(h>d||c>p)&&b(h,c)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(c),containerWidth:Math.floor(h)+settings.horizontal_padding*2,contentHeight:Math.floor(f),contentWidth:Math.floor(l),resized:resized}}function w(t,n){t=parseFloat(t),n=parseFloat(n),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,e.browser.msie&&e.browser.version==7&&(detailsHeight+=8),$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),f=n+detailsHeight,l=t,c=f+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),h=t}function E(e){return e.match(/youtube\.com\/watch/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":e.substr(0,1)=="#"?"inline":"image"}function S(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=x(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=p/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0);if(contentHeight>p)return;$pp_pic_holder.css({top:projectedTop,left:d/2+scroll_pos.scrollLeft-contentwidth/2})}}function x(){if(self.pageYOffset)return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};if(document.documentElement&&document.documentElement.scrollTop)return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};if(document.body)return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}function T(){p=e(window).height(),d=e(window).width(),typeof $pp_overlay!="undefined"&&$pp_overlay.height(e(document).height()).width(d)}function N(){isSet&&settings.overlay_gallery&&E(pp_images[set_position])=="image"&&settings.ie6_fallback&&(!e.browser.msie||parseInt(e.browser.version)!=6)?(itemWidth=57,navWidth=settings.theme=="facebook"||settings.theme=="pp_default"?50:30,itemsPerPage=Math.floor((u.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,totalPage==0?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function C(t){settings.markup=settings.markup.replace("{pp_social}",settings.social_tools?settings.social_tools:""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var n=0;n<pp_images.length;n++)pp_images[n].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[n]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),e("a.pp_expand").bind("click",function(t){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),g(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),S()}i=jQuery.extend({animation_speed:"fast",slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											{pp_social} 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="pp_social"><div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="http://www.facebook.com/plugins/like.php?locale=en_US&href='+location.href+'&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div></div>'},i);var s=this,o=!1,u,a,f,l,c,h,p=e(window).height(),d=e(window).width(),v;return doresize=!0,scroll_pos=x(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){S(),T()}),i.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if(typeof $pp_pic_holder!="undefined"&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){return settings=i,settings.theme=="pp_default"&&(settings.horizontal_padding=16),settings.ie6_fallback&&e.browser.msie&&parseInt(e.browser.version)==6&&(settings.theme="light_square"),theRel=e(this).attr("rel"),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(s,function(t,n){if(e(t).attr("rel").indexOf(theRel)!=-1)return e(t).attr("href")}):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(s,function(t,n){if(e(t).attr("rel").indexOf(theRel)!=-1)return e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):""}):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(s,function(t,n){if(e(t).attr("rel").indexOf(theRel)!=-1)return e(t).attr("title")?e(t).attr("title"):""}):e.makeArray(e(this).attr("title")),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a[rel^='"+theRel+"']").index(e(this)),C(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){S()}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return typeof settings=="undefined"&&(settings=i,e.browser.msie&&e.browser.version==6&&(settings.theme="light_square"),pp_images=e.makeArray(arguments[0]),pp_titles=arguments[1]?e.makeArray(arguments[1]):e.makeArray(""),pp_descriptions=arguments[2]?e.makeArray(arguments[2]):e.makeArray(""),isSet=pp_images.length>1?!0:!1,set_position=0,C(t.target)),e.browser.msie&&e.browser.version==6&&e("select").css("visibility","hidden"),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),y(e(pp_images).size()),e(".pp_loaderIcon").show(),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),pp_descriptions[set_position]!=""?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(r("width",pp_images[set_position]))?r("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(r("height",pp_images[set_position]))?r("height",pp_images[set_position]):settings.default_height.toString(),o=!1,movie_height.indexOf("%")!=-1&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),o=!0),movie_width.indexOf("%")!=-1&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),o=!0),$pp_pic_holder.fadeIn(function(){settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined"?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1;switch(E(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){u=b(imgPreloader.width,imgPreloader.height),m()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":u=b(movie_width,movie_height),movie="http://www.youtube.com/embed/"+r("v",pp_images[set_position]),r("rel",pp_images[set_position])?movie+="?rel="+r("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":u=b(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http:\/\/(www\.)?vimeo.com\/(\d+)/,n=movie_id.match(t);movie="http://player.vimeo.com/video/"+n[2]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=u.width+"/embed/?moog_width="+u.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,u.height).replace(/{path}/g,movie);break;case"quicktime":u=b(movie_width,movie_height),u.height+=15,u.contentHeight+=15,u.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":u=b(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":u=b(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,u=b(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,m()});break;case"custom":u=b(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,u=b(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}!imgPreloader&&!skipInjection&&($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,m())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,t=="previous"?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):t=="next"?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),g(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){e=="next"?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):e=="previous"?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed=e=="next"||e=="previous"?settings.animation_speed:0,slide_to=currentGalleryPage*itemsPerPage*itemWidth,$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){typeof v=="undefined"?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),v=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(v),v=undefined},e.prettyPhoto.close=function(){if($pp_overlay.is(":animated"))return;e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){e.browser.msie&&e.browser.version==6&&e("select").css("visibility","visible"),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),settings.callback(),doresize=!0,a=!1,delete settings})},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){e("a[rel^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;define("jquery_prettyPhoto",function(){}),setupContentMenu=function(){},setupHandlers=function(){var e=jq;e.each(e("div.expandable-section, a.expandable-label"),function(t,n){e(n).bind("click",function(){var t=e(n).parent(),r=e("div.expandable-content",t),i=t.parents(".collage-row").eq(0),s=e(n).attr("href");if(!s)return;return e(n).attr("class").indexOf("enabled")!=-1?(r.css("display","none"),i.next(".collage-row").eq(0).css("margin-top","0px")):(r.css("display","block"),i.next(".collage-row").eq(0).css("margin-top","1px"),e.each(e(".ajax-reference-browser",t),function(t,n){e(n).load(s,function(){i.next(".collage-row").eq(0).css("margin-top","1%"),setupExistingItemsForm()})})),e(n).toggleClass("enabled").blur(),!1})}),setupLinks("a.post")},setupNavigation=function(){var e=jq;e("a.collage-js-down").bind("click",{jquery:e},triggerMoveDown),e("a.collage-js-up").bind("click",{jquery:e},triggerMoveUp)},submitExistingItemsForm=function(e){var t=jq,n=t(e).parents("form").eq(0),r=n.attr("action"),i=t(":input",n),s=t(e).parents(".ajax-reference-browser").eq(0);s.load(r,extractParams(i.serialize()),function(){setupExistingItemsForm()})},updateExistingItems=function(e){var t=jq,n=t(e).attr("href"),r=t(e).parents(".ajax-reference-browser").eq(0),i=r.find("ul.collage-content-menu");i.css("visibility","hidden"),r.load(n,function(){setupExistingItemsForm(),i.css("visibility","display")})},setupExistingItemsForm=function(){var e=jq;e("form.collage-existing-items select").change(function(e){this.blur(),submitExistingItemsForm(this)}),e("form.collage-existing-items [name=SearchableText]").keydown(function(e){e.keyCode==13&&(e.preventDefault,submitExistingItemsForm(this))}),e("form.collage-existing-items input[type=submit]").click(function(e){e.preventDefault,submitExistingItemsForm(this)}),e(".ajax-reference-browser a.get, .ajax-reference-browser .listingBar a").click(function(e){return e.preventDefault,updateExistingItems(this),!1}),setupLinks("form.collage-existing-items a.post")},addIHTMLmsg=function(e,t){e._contents=e.innerHTML,e.innerHTML+=" ("+t+")"},restoreElement=function(e){e.innerHTML=e._contents},doSimpleQuery=function(e,t){var n=jq,r=e.split("?"),e=r[0];t=r.length>1?extractParams(r[1]):{},t.url=(new Date).getTime(),t.simple=1;var i=n("h1.documentFirstHeading").get(0);i&&addIHTMLmsg(i,"Saving..."),n.post(e,t,function(e){i&&restoreElement(i)})},extractParams=function(e){var t={},n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=i[1]}return t},triggerMoveDown=function(e){return triggerMove.call(this,e,1)},triggerMoveUp=function(e){return triggerMove.call(this,e,-1)},triggerMove=function(e,t){var n=jq;n=e.data.jquery,e.preventDefault();var r=n(this);r.blur();var i=e.data.className,s=r.parents(".collage-row").eq(0),o=r.parents(".collage-column").eq(0),u=r.parents(".collage-item").eq(0),a=null,f=null,l=null;u.length?(l=n(".collage-item",o),f=n(u)):o.length?(l=n(".collage-column",s),f=n(o)):(l=n(".collage-row"),f=n(s));var c=l.index(f.get(0));if(!(c+t>=0&&c+t<l.length))return!1;a=n(l[c+t]),swap(f,a),doSimpleQuery(r.attr("href"))},swap=function(e,t){var n=e.after("<span></span>").next();t.after(e),t.insertBefore(n),n.remove()},define("collage",function(){}),triggerMove=function(e,t){var n=jq;n=e.data.jquery,e.preventDefault();var r=n(this);r.blur();var i=e.data.className,s=r.parents(".collage-row").eq(0),o=r.parents(".collage-column").eq(0),u=r.parents(".collage-item").eq(0),a=null,f=null,l=null;u.length?(l=u.parents("#collage").find(".collage-item",o),f=n(u)):o.length?(l=o.parents("#collage").find(".collage-column",s),f=n(o)):(l=s.parents("#collage").find(".collage-row"),f=n(s));var c=l.index(f.get(0));if(!(c+t>=0&&c+t<l.length))return!1;a=n(l[c+t]),swap(f,a),doSimpleQuery(r.attr("href"))},define("collage-patch",function(){}),function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u,a=function(e){i=e.pageX,s=e.pageY},f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity)return e(n).unbind("mousemove",a),n.hoverIntent_s=1,r.over.apply(n,[t]);o=i,u=s,n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)},l=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),t.type=="mouseenter"?(o=n.pageX,u=n.pageY,e(i).bind("mousemove",a),i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){f(n,i)},r.interval))):(e(i).unbind("mousemove",a),i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){l(n,i)},r.timeout)))};return this.bind("mouseenter",c).bind("mouseleave",c)}}(jQuery),define("hoverIntent",function(){}),jq(document).ready(function(){function e(){var e=document.location.href;jq("#portal-megamenu li.menu_view_menu a").each(function(){e.startsWith(this.href)&&jq(this).closest("li").addClass("selected")})}function t(){var e=jq(this),t=e.siblings(".active");t.length>0&&(r(t),e.find("a").focus()),e.removeClass("hover").addClass("active").prev("li").addClass("nextActive"),e.next("li").addClass("prevActive");var n=e.find(".sub");if(n.length>0){var i=n.data("shadow");i||(n.after('<div class="subShadow" style="display: none;"></div>'),i=n.next(".subShadow"),n.data("shadow",i)),n.stop().fadeTo(50,1).show(),i.stop().fadeTo(50,.6).show();var s=jq(window).width();n.css("left",0);var o=n.width(),u=s-(n.offset().left+o+19+20),a=0;u<0&&(a=u),n.css("left",a),i.css({left:a,width:n.outerWidth(),height:n.outerHeight()})}}function n(){var e=jq(this),t=document.activeElement;if(t.nodeType==1&&t.tagName.toLowerCase().match(/^(input|textarea|select|button)$/)){t=jq(t);if(t.closest("li.top-level.active").length>0){jq(window).click(function(t){var n=jq(t.target),i=n.closest("li.top-level.active");i.length===0&&r(e)});return}}r(e)}function r(e){e=e||jq(this),e.removeClass("active").prev("li").removeClass("nextActive"),e.next("li").removeClass("prevActive");var t=e.find(".sub");if(t.length>0){var n=t.data("shadow");t.stop().fadeTo(50,0,function(){jq(this).hide()}),n&&n.stop().fadeTo(50,0,function(){jq(this).hide()})}}(function(e){jQuery.fn.calcSubWidth=function(){var t=0;return e(this).find(">ul").each(function(){t+=e(this).width()}),t}})(jQuery),function(e){jQuery.fn.resetWidth=function(t){t||this.css("opacity",0).show();var n=this.find(">.menu-row"),r=0;n.each(function(){var t=e(this),n=t.find(">ul>li.menu_view_nested-menu");n.each(function(){e(this).resetWidth(!0)});var i=t.calcSubWidth();i>r&&(r=i)}),n.each(function(){var t=e(this).find(">ul"),n=t.length;t.css("width",r/n)}),r+=30,$(window).width()<=768?this.css({width:"100%"}):this.css({width:r}),this.find(">.menu-row:last").css({margin:"0"}),t||this.hide()}}(jQuery),String.prototype.startsWith=function(e){return this.substring(0,e.length)===e};var i={sensitivity:2,interval:200,over:t,timeout:100,out:n},s=jq("#portal-megamenu");s.find("li .sub").css({opacity:"0"}),s.find("li.top-level").hover(function(){jq(this).addClass("hover")},function(){jq(this).removeClass("hover")}).hoverIntent(i).click(function(){var e=jq(this);e.hasClass("active")?r(e):jq.proxy(t,e)()}).find("a").click(function(e){jq(this).closest("li").find(".sub").length>0&&e.preventDefault()});var o=s.find("a[rel=deferred]");o.length>0?s.find("a[rel=deferred]").each(function(){jq(this).parent().load(this.href,function(t,n,r){jq(this).resetWidth(),e()})}):s.find(".sub").each(function(){jq(this).resetWidth(),e()})}),define("megamenu",function(){}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=n,this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f;this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u](),f=e.Event("slide",{relatedTarget:i[0]});if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){function r(){e(t).each(function(){i(e(this)).removeClass("open")})}function i(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||s.toggleClass("open"),n.focus(),!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this),t.preventDefault(),t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider):visible a",o);if(!r.length)return;a=r.index(r.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<r.length-1&&a++,~a||(a=0),r.eq(a).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",r).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.offset(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n[n.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var n=e(this),r=n.data("target")||n.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+t.$scrollElement.scrollTop(),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("bootstrap",function(){}),registerPloneFunction(showEnableCookiesMessage),define("login",function(){}),$(document).ready(function(){$("#page-title h1").prepend("<span></span>");var e=(new Date).getFullYear();$("#copyright").html(e),setupContentMenu(),setupHandlers(),setupNavigation(),$(".modal").appendTo($("body"));var t=$("#clarify_it_id").html();$("#clarify-it").load("/clarify/"+t+" #content",function(){$("a[rel^='prettyPhoto']").prettyPhoto()}),$("#new_helpdesk_note").on("submit",function(e){e.preventDefault();var t=""+jquery(this).attr("action"),n=new FormData(document.getElementById("new_helpdesk_note")),r=$("textarea#portal_ticket_note").val();$.ajax({type:"POST",url:t,data:n,contentType:!1,processData:!1}).done(function(e){location.reload()}).fail(function(e){alert("error")})}),$(".newsImageContainer a").prepOverlay({subtype:"image",urlmatch:"/image_view_fullscreen$",urlreplace:"_preview",config:{mask:{color:"#000",opacity:.7}}}),$(".overlay-profile").prepOverlay({subtype:"ajax",filter:"#content > *",config:{mask:{color:"#000",opacity:.7}}});var n=-15,r=1.2;$(".item").hover(function(){width=$(".item").width()*r,height=$(".item").height()*r,$(this).find("img").stop(!1,!0).animate({width:width,height:height,top:n,left:n},{duration:200}),$(this).find("div.caption").stop(!1,!0).fadeIn(200)},function(){$(this).find("img").stop(!1,!0).animate({width:$(".item").width(),height:$(".item").height(),top:"0",left:"0"},{duration:100}),$(this).find("div.caption").stop(!1,!0).fadeOut(200)})}),define("domready_script",function(){}),require.config({paths:{modernizr:"components/modernizr/modernizr",bootstrap:"components/bootstrap/docs/assets/js/bootstrap",domReady:"components/requirejs-domready/domReady",hoverIntent:"/++resource++collective.collage.megamenu/jquery.hoverIntent.minified",collage:"/++resource++collage-resources/collage","collage-patch":"/++resource++collective.collage.megamenu/collage-patch",megamenu:"/++resource++collective.collage.megamenu/megamenu","jquery-integration":"/jquery-integration",jquerytools:"/++resource++plone.app.jquerytools","jquerytools-dateinput":"/++resource++plone.app.jquerytools.dateinput","jquerytools-overlayhelpers":"/++resource++plone.app.jquerytools.overlayhelpers","jquerytools-form":"/++resource++plone.app.jquerytools.form","register-function":"/register_function",plone_javascript_variables:"/plone_javascript_variables",nodeutilities:"/nodeutilities",cookie_functions:"/cookie_functions",livesearch:"/livesearch",search:"/++resource++search",select_all:"/select_all",dragdropreorder:"/dragdropreorder",collapsiblesections:"/collapsiblesections",form_tabbing:"/form_tabbing",popupforms:"/popupforms","jquery.highlightsearchterms":"/jquery.highlightsearchterms",first_input_focus:"/first_input_focus",accessibility:"/accessibility",styleswitcher:"/styleswitcher",toc:"/toc",collapsibleformfields:"/collapsibleformfields",comments:"/++resource++plone.app.discussion.javascripts/comments",dropdown:"/dropdown",table_sorter:"/table_sorter",calendar_formfield:"/calendar_formfield",formUnload:"/formUnload",formsubmithelpers:"/formsubmithelpers",unlockOnFormUnload:"/unlockOnFormUnload",autocomplete:"/++resource++plone.formwidget.autocomplete/jquery.autocomplete.min","formwidget-autocomplete":"/++resource++plone.formwidget.autocomplete/formwidget-autocomplete",contenttree:"/++resource++plone.formwidget.contenttree/contenttree",jquery_prettyPhoto:"/++resource++jquery.prettyPhoto",prettyPhoto:"/prettyPhoto",login:"/login",domready_script:"js/scripts"},shim:{"jquerytools-dateinput":["jquerytools"],"jquerytools-overlayhelpers":["jquerytools"],"jquerytools-form":["jquerytools"],search:["modernizr","plone_javascript_variables"],select_all:["plone_javascript_variables"],popupforms:["jquerytools-overlayhelpers"],accessibility:["cookie_functions"],styleswitcher:["cookie_functions"],"formwidget-autocomplete":["autocomplete"],prettyPhoto:["jquery_prettyPhoto"],"collage-patch":["collage"],hoverIntent:["collage","collage-patch"],megamenu:["hoverIntent"],login:["register-function"],domready_script:["collage","domReady"]}}),require(["domReady","jquery-integration","jquerytools","jquerytools-dateinput","jquerytools-overlayhelpers","jquerytools-form","register-function","plone_javascript_variables","nodeutilities","cookie_functions","livesearch","search","select_all","dragdropreorder","collapsiblesections","form_tabbing","popupforms","jquery.highlightsearchterms","first_input_focus","accessibility","styleswitcher","toc","collapsibleformfields","comments","dropdown","table_sorter","calendar_formfield","formUnload","formsubmithelpers","unlockOnFormUnload","autocomplete","formwidget-autocomplete","contenttree","jquery_prettyPhoto","prettyPhoto","collage","collage-patch","hoverIntent","megamenu","bootstrap","login","domready_script"],function(e){e(function(){})}),define("main",function(){});